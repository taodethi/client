(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[812],{3356:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[year]/[month]/[slug]",function(){return n(1097)}])},8928:function(e,t,n){"use strict";var i=n(5893),r=n(948),l=n(7357);let o=(0,r.ZP)(l.Z)(e=>{let{theme:t}=e;return{height:"100vh","& .content-center":{display:"flex",minHeight:"100vh",alignItems:"center",justifyContent:"center",padding:t.spacing(5)},"& .content-right":{display:"flex",minHeight:"100vh",overflowX:"hidden",position:"relative"}}}),s=e=>{let{children:t}=e;return(0,i.jsx)(o,{className:"layout-wrapper",children:(0,i.jsx)(l.Z,{className:"app-content",sx:{overflow:"hidden",minHeight:"100vh",position:"relative"},children:t})})};t.Z=s},1097:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return e0}});var i=n(5893);n(7896);var r=n(1163),l=n(9770),o=n(1572),s=n(3972),a=n(6867),c=n(8492),d=n(8041),u=n(1664),x=n.n(u),h=n(2054),m=e=>{let{post:t}=e;return(0,i.jsxs)(d.Z,{"aria-label":"breadcrumb",children:[t?(0,i.jsx)(x(),{underline:"hover",color:"success",href:"/",passHref:!0,children:"Trang chủ"}):(0,i.jsx)(h.Z,{variant:"text",sx:{fontSize:"1rem"},width:100,animation:"wave"}),t?(t.category||[]).map((e,t)=>(0,i.jsx)(x(),{underline:"hover",color:"inherit",href:"/search/label/"+e,passHref:!0,children:e},t)):(0,i.jsx)(h.Z,{variant:"text",sx:{fontSize:"1rem"},width:150,animation:"wave"})]})},g=n(6532),p=n(1250),v=n(3083),f=n(8843),j=n(9334),y=n(8619),Z=n(9861),b=n(8756),w=n(9878),S=n(7294);let k=e=>{let{post:t}=e,[n,r]=(0,S.useState)([]),{settings:l}=(0,b.r)();(0,S.useEffect)(()=>{if(t&&t.content){let e=new DOMParser,n=e.parseFromString(t.content,"text/html"),i=n.querySelectorAll("h1, h2, h3, h4, h5, h6"),l=Array.from(i).map(e=>({text:e.textContent,level:parseInt(e.tagName.charAt(1)),id:e.id}));r(l)}},[t]);let o=(e,t)=>{e.preventDefault();let n=document.querySelector("#post-content"),i=n.querySelectorAll("h1, h2, h3, h4, h5, h6");if(i.length>t){let e=i[t],n=e.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:n-75,behavior:"smooth"})}};return console.log(n),n.length?(0,i.jsx)("div",{children:(0,i.jsxs)(g.Z,{defaultExpanded:!0,sx:{backgroundColor:"dark"==l.mode?"#1c1e2154":"#fef6ec"},children:[(0,i.jsx)(p.Z,{expandIcon:(0,i.jsx)(w.Z,{fontSize:"1.25rem",icon:"tabler:chevron-down"}),children:(0,i.jsx)(s.Z,{variant:"h4",sx:{fontWeight:"700!important"},children:"Mục lục"})}),(0,i.jsx)(v.Z,{children:(0,i.jsx)(f.Z,{component:"ul",children:n.map((e,t)=>(0,i.jsx)(Z.ZP,{disablePadding:!0,onClick:e=>o(e,t),children:(0,i.jsx)(y.Z,{children:(0,i.jsx)(j.Z,{primary:e.text})})},t))})})]})}):null};var C=n(1649),E=n(7225),I=n(7357),T=n(4799),L=n(1800),P=e=>{let{post:t,changeFont:n}=e,r=(0,C.I0)(),l=e=>{e.stopPropagation(),e.preventDefault(),r((0,E.z)(t))};return t?(0,i.jsxs)(I.Z,{sx:{display:"flex",alignItems:"center",flexWrap:"wrap",mb:5},children:[(0,i.jsxs)(I.Z,{sx:{mr:2,display:"flex",alignItems:"center",color:"primary.main"},children:[(0,i.jsx)(w.Z,{icon:"tabler:discount-check-filled"}),(0,i.jsxs)(I.Z,{sx:{display:{xs:"none",sm:"flex"},alignItems:"center"},children:[(0,i.jsx)(s.Z,{variant:"body2",sx:{mx:2,color:"primary.main"},children:(window.BLOGGER||{}).author||t.author}),(0,i.jsx)(w.Z,{icon:"tabler:point-filled",fontSize:10})]}),(0,i.jsx)(s.Z,{sx:{mx:2,color:"primary.main"},children:(0,L.default)(t.updated).locale("vi").format("HH:mm DD/MM/YYYY")})]}),(0,i.jsxs)(I.Z,{sx:{display:"flex",alignItems:"center",marginLeft:"auto"},children:[(0,i.jsx)(T.Z,{size:"small",onClick:()=>n(-2),sx:{color:"primary.main"},children:(0,i.jsx)(w.Z,{icon:"tabler:text-decrease",fontSize:16})}),(0,i.jsx)(T.Z,{size:"small",onClick:()=>n(2),sx:{color:"primary.main"},children:(0,i.jsx)(w.Z,{icon:"tabler:text-increase",fontSize:22})}),(0,i.jsx)(T.Z,{onClick:l,size:"small",sx:{color:"primary.main"},children:(0,i.jsx)(w.Z,{icon:"tabler:share",fontSize:20})})]})]}):(0,i.jsxs)(I.Z,{sx:{display:"flex",alignItems:"center",flexWrap:"wrap",mb:5,justifyContent:"space-between"},children:[(0,i.jsx)(h.Z,{width:200}),(0,i.jsxs)(I.Z,{sx:{display:"flex"},children:[(0,i.jsx)(h.Z,{variant:"circular",width:30,height:30}),(0,i.jsx)(h.Z,{variant:"circular",width:30,height:30,sx:{mx:1}}),(0,i.jsx)(h.Z,{variant:"circular",width:30,height:30})]})]})};let W=e=>{let{post:t}=e,[n,r]=(0,S.useState)(18),l=e=>{r(t=>t+e>=14&&t+e<=26?t+e:t)};return(0,i.jsxs)("div",{style:{mb:3},children:[(0,i.jsx)(c.Z,{children:(0,i.jsx)(m,{post:t})}),(0,i.jsx)(a.Z,{title:t?(0,i.jsx)(s.Z,{variant:"h1",sx:{lineHeight:"1.25",fontSize:"1.75rem",fontWeight:700,textAlign:"justify"},className:"post-title",children:t.title}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.Z,{animation:"wave"}),(0,i.jsx)(h.Z,{animation:"wave"})]})}),(0,i.jsxs)(c.Z,{className:"content-post",children:[(0,i.jsx)(P,{post:t,changeFont:l}),t?(0,i.jsx)(k,{post:t}):(0,i.jsx)(h.Z,{animation:"wave",height:50,variant:"rounded",sx:{mb:2}}),t?(0,i.jsx)(s.Z,{variant:"subtitle1",id:"post-content",sx:{mb:3.25,fontSize:n+"px",lineHeight:"1.75rem"},dangerouslySetInnerHTML:{__html:t.content}}):(0,i.jsx)(h.Z,{animation:"wave",height:500,variant:"rectangular"})]})]})};var z=n(9397),N=n(4486),H=n(3931),M=n(7720),F=n(8885),A=n(2563),R=n(6485),q=n.n(R),_=n(6455),O=n.n(_);let Y=e=>{let{post:t}=e,[n,r]=(0,S.useState)(null),l=e=>{r(e.currentTarget)},o=()=>{r(null)},a=()=>{let e=document.getElementById("post-comment");e&&e.scrollIntoView({behavior:"smooth"}),o()},c=()=>{q()((null==t?void 0:t.url)||""),o(),O().fire({icon:"success",text:"Đ\xe3 sao ch\xe9p th\xe0nh c\xf4ng",timer:1500})},[d,u]=(0,S.useState)(!1);if((0,S.useEffect)(()=>{let e=()=>{let e=document.getElementById("post-content");if(e){let t=e.getBoundingClientRect(),n=window.innerHeight;u(t.top<n&&t.bottom>0&&window.scrollY>20)}};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[]),!t||!d)return null;let h=t.category[t.category.length-1]||"";return(0,i.jsxs)(I.Z,{sx:{display:{md:"flex",xs:"none"},alignItems:"center",justifyContent:"space-between",position:"fixed",top:0,left:0,zIndex:99,width:"100%",padding:2,backgroundColor:e=>(0,A.E)(e.palette.background.paper,.95),backdropFilter:"blur(6px)"},children:[(0,i.jsx)(z.Z,{startIcon:(0,i.jsx)(w.Z,{icon:"tabler:chevron-left"}),component:x(),href:"/search/label/"+h,disableRipple:!0,children:h}),(0,i.jsxs)(I.Z,{sx:{display:"flex",alignItems:"center",width:"fit-content"},children:[(0,i.jsxs)(I.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,i.jsx)(s.Z,{variant:"body",noWrap:!0,textAlign:"center",children:(0,L.default)(t.updated).format("HH:MM")}),(0,i.jsx)(s.Z,{variant:"body",noWrap:!0,textAlign:"center",sx:{fontWeight:600},children:(0,L.default)(t.updated).format("DD [th\xe1ng] MM")})]}),(0,i.jsx)(M.Z,{orientation:"vertical",flexItem:!0,sx:{mx:2}}),(0,i.jsx)(s.Z,{variant:"h5",sx:{fontWeight:600},children:t.title})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(T.Z,{onClick:l,children:(0,i.jsx)(w.Z,{icon:"tabler:dots"})}),(0,i.jsxs)(N.Z,{keepMounted:!0,id:"simple-menu",anchorEl:n,onClose:o,open:!!n,children:[(0,i.jsxs)(H.Z,{children:[(0,i.jsx)(F.Z,{children:(0,i.jsx)(w.Z,{icon:"tabler:share-3",fontSize:15})}),(0,i.jsx)(j.Z,{primary:"Gửi cho bạn b\xe8"})]}),(0,i.jsxs)(H.Z,{children:[(0,i.jsx)(F.Z,{children:(0,i.jsx)(w.Z,{icon:"tabler:user-edit",fontSize:15})}),(0,i.jsx)(j.Z,{primary:"Đăng l\xean nhật k\xfd"})]}),(0,i.jsxs)(H.Z,{onClick:c,children:[(0,i.jsx)(F.Z,{children:(0,i.jsx)(w.Z,{icon:"tabler:link",fontSize:15})}),(0,i.jsx)(j.Z,{primary:"Sao ch\xe9p li\xean kết"})]}),(0,i.jsxs)(H.Z,{onClick:a,children:[(0,i.jsx)(F.Z,{children:(0,i.jsx)(w.Z,{icon:"tabler:message-circle",fontSize:15})}),(0,i.jsx)(j.Z,{primary:"Đăng nhận x\xe9t"})]}),(0,i.jsxs)(H.Z,{component:x(),href:"/",children:[(0,i.jsx)(F.Z,{children:(0,i.jsx)(w.Z,{icon:"tabler:home",fontSize:15})}),(0,i.jsx)(j.Z,{primary:"Về trang chủ"})]})]})]})]})};var B=n(8263),D=n(9008),J=n.n(D);let G=e=>{let{post:t}=e;return console.log("posttemplate",t),(0,i.jsxs)(o.Z,{children:[(0,i.jsx)(J(),{children:(0,i.jsx)("title",{children:null==t?void 0:t.title})}),(0,i.jsx)(Y,{post:t}),(0,i.jsxs)(B.ZP,{container:!0,spacing:5,children:[(0,i.jsx)(B.ZP,{item:!0,xs:12,md:9,children:(0,i.jsx)(W,{post:t})}),(0,i.jsx)(B.ZP,{item:!0,xs:12,md:3,children:"Sidebar"})]})]})};var Q=n(43),K=n(8928),U=n(1987),X=n(7965),V=n(9487);let $=e=>{let{customs:t,setIndex:n,submitQuiz:r}=e;return(0,i.jsx)(U.Z,{sx:{position:"fixed",bottom:0,left:0,right:0},children:(0,i.jsxs)(X.Z,{showLabels:!0,children:["Q"==t.mode?(0,i.jsx)(V.Z,{label:"C\xe2u trước",icon:(0,i.jsx)(w.Z,{icon:"tabler:chevron-left",fontSize:20}),sx:{maxWidth:"unset",color:"green"},disabled:t.currentIndex<1,onClick:n(Math.max(t.currentIndex-1,0))}):null,(0,i.jsx)(V.Z,{label:"Nộp b\xe0i",icon:(0,i.jsx)(w.Z,{icon:"tabler:user-pause",fontSize:20}),sx:{maxWidth:"unset",color:"red"},onClick:r(!1)}),"Q"==t.mode?(0,i.jsx)(V.Z,{label:"C\xe2u sau",icon:(0,i.jsx)(w.Z,{icon:"tabler:chevron-right",fontSize:20}),sx:{maxWidth:"unset",color:"green"},onClick:n(Math.min(t.currentIndex+1,t.maxQuestions-1)),disabled:t.currentIndex+1>=t.maxQuestions}):null]})})};var ee=n(2623);let et=e=>{let{details:t,moveToQuestion:n}=e;return(0,i.jsxs)(ee.Z,{sx:{position:"sticky",top:0},children:[(0,i.jsx)(a.Z,{title:(0,i.jsx)(s.Z,{variant:"h5",children:"Danh s\xe1ch c\xe2u hỏi"})}),(0,i.jsx)(c.Z,{children:(0,i.jsx)(I.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:1,flexWrap:"wrap"},children:t.payload.questions.map((e,t)=>(0,i.jsx)(z.Z,{variant:"tonal",user:"TF"==e.type&&(e.answers||[]).filter(e=>e).length||"TF"!=e.type&&(e.answers||[]).filter(e=>e.toString().trim()).length?"choice":"",onClick:n(e.id),sx:{minWidth:"3.75rem"},children:null==e?void 0:e.number},t))})})]})};var en=n(7952),ei=n(2734),er=n(1796);let el=()=>{let e=(0,ei.Z)();return{primaryFilled:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main},primaryLight:{color:e.palette.primary.main,backgroundColor:(0,A.E)(e.palette.primary.main,.16)},secondaryFilled:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main},secondaryLight:{color:e.palette.secondary.main,backgroundColor:(0,A.E)(e.palette.secondary.main,.16)},successFilled:{color:e.palette.success.contrastText,backgroundColor:e.palette.success.main},successLight:{color:e.palette.success.main,backgroundColor:(0,A.E)(e.palette.success.main,.16)},errorFilled:{color:e.palette.error.contrastText,backgroundColor:e.palette.error.main},errorLight:{color:e.palette.error.main,backgroundColor:(0,A.E)(e.palette.error.main,.16)},warningFilled:{color:e.palette.warning.contrastText,backgroundColor:e.palette.warning.main},warningLight:{color:e.palette.warning.main,backgroundColor:(0,A.E)(e.palette.warning.main,.16)},infoFilled:{color:e.palette.info.contrastText,backgroundColor:e.palette.info.main},infoLight:{color:e.palette.info.main,backgroundColor:(0,A.E)(e.palette.info.main,.16)}}},eo=(0,S.forwardRef)((e,t)=>{let{sx:n,src:r,skin:l,color:o}=e,s=(0,ei.Z)(),a=el(),c=(e,t)=>"light"===e?{...a["".concat(t,"Light")]}:"light-static"===e?{color:a["".concat(t,"Light")].color,backgroundColor:(0,er.$n)(s.palette[t].main,.88)}:{...a["".concat(t,"Filled")]},d={primary:c(l,"primary"),secondary:c(l,"secondary"),success:c(l,"success"),error:c(l,"error"),warning:c(l,"warning"),info:c(l,"info")};return(0,i.jsx)(en.Z,{ref:t,...e,sx:!r&&l&&o?Object.assign(d[o],n):n})});eo.defaultProps={skin:"filled",color:"primary"};var es=n(1008);n(8594);var ea=n(2715);let ec=e=>{let[t,n]=(0,S.useState)(e.value||""),r=(0,S.useRef)(null),l=t=>{var{value:i}=t.target;n(i),clearTimeout(r.current),r.current=setTimeout(()=>{e.onChange&&e.onChange(i)},500)};return(0,S.useEffect)(()=>()=>{clearTimeout(r.current)},[]),(0,i.jsx)(ea.Z,{value:t,fullWidth:!0,onChange:l,placeholder:e.placeholder,rows:e.rows,multiline:!!e.rows,autoComplete:"off"})};var ed=n(2872);let eu=e=>{let t=e.match(/^(?:https?:\/\/)?(?:www\.)?youtu\.?be(?:\.com)?\/(?:watch\?v=|embed\/|v\/|youtu\.be\/|youtube\.com\/(?:c\/|v\/|u\/\w+\/|embed\/|watch\?v=|shorts\/))([\w-]{11})(?:[?&].*|$)/);return t?t[1]:null},ex=e=>{let t=Math.floor(e/3600);return"".concat(t?"".concat(String(t).padStart(2,"0"),":"):"").concat(String(Math.floor(e%3600/60)).padStart(2,"0"),":").concat(String(Math.floor(e%60)).padStart(2,"0"))},eh=[{title:"0.5",value:.5},{title:"0.75",value:.75},{title:"B\xecnh thường",value:1},{title:"1.5",value:1.5},{title:"2",value:2}],em=e=>{let{audio:t}=e,[n,r]=(0,S.useState)(!1),[l,o]=(0,S.useState)(0),[a,c]=(0,S.useState)(0),[d,u]=(0,S.useState)(1),x=(0,S.useRef)(new Audio(t.src));(0,S.useEffect)(()=>{let e=x.current,t=()=>{o(e.currentTime),c(e.duration)},n=()=>{r(!1)};return e.addEventListener("timeupdate",t),e.addEventListener("ended",n),()=>{e.removeEventListener("timeupdate",t),e.removeEventListener("ended",n)}},[]);let h=()=>{x.current&&(n?x.current.pause():x.current.play(),r(!n))},m=e=>{if(!x.current)return;let{duration:n}=x.current,i=n*(e.target.value/100);(null==t?void 0:t.next)&&(x.current.currentTime=i)},g=e=>{x.current.playbackRate=e,f(null),u(e)},p=()=>{let e=document.createElement("a");e.href=t.src,e.target="_blank",document.body.appendChild(e),e.click(),document.body.removeChild(e)},[v,f]=(0,S.useState)(null);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(I.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",background:"white",padding:2,borderRadius:10,boxShadow:"0px 4px 18px 0px rgba(47, 43, 61, 0.1)"},children:[(0,i.jsxs)(I.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mr:3},children:[(0,i.jsx)(T.Z,{onClick:h,children:(0,i.jsx)(w.Z,{icon:"tabler:"+(n?"pause":"player-play")})}),(0,i.jsxs)(s.Z,{variant:"body",children:[ex(l),"/",ex(a)]})]}),(0,i.jsx)(I.Z,{sx:{flexGrow:1,display:"flex",alignItems:"center",mr:2},children:(0,i.jsx)(ed.ZP,{value:l/a*100||0,disabled:!a,onChange:m})}),(0,i.jsxs)(I.Z,{children:[(null==t?void 0:t.speed)?(0,i.jsx)(T.Z,{onClick:e=>{f(e.currentTarget)},children:(0,i.jsx)(w.Z,{icon:"tabler:placeholder"})}):null,(null==t?void 0:t.download)?(0,i.jsx)(T.Z,{onClick:p,children:(0,i.jsx)(w.Z,{icon:"tabler:download"})}):null]})]}),(0,i.jsx)(N.Z,{keepMounted:!0,anchorEl:v,onClose:()=>{f(null)},open:!!v,children:eh.map((e,t)=>(0,i.jsxs)(H.Z,{onClick:()=>g(e.value),children:[e.value==d?(0,i.jsx)(F.Z,{children:(0,i.jsx)(w.Z,{icon:"tabler:check",fontSize:20})}):null,(0,i.jsx)(j.Z,{primary:e.title})]},t))})]})},eg=e=>{var t;let{audio:n}=e,[r,l]=(0,S.useState)(!1),[o,a]=(0,S.useState)(0),[c,d]=(0,S.useState)(0),[u,x]=(0,S.useState)(1),h=(0,S.useRef)(null),m=()=>{h.current&&(r?h.current.pause():h.current.play(),l(!r))},g=e=>{if(!h.current)return;let{duration:t}=h.current,i=t*(e.target.value/100);(null==n?void 0:n.next)&&(h.current.currentTime=i)},p=e=>{h.current&&(h.current.playbackRate=e,y(null),x(e))},v=()=>{var e;if(!h.current)return;let t=document.createElement("a");t.href=null==h?void 0:null===(e=h.current)||void 0===e?void 0:e.src,t.target="_blank",document.body.appendChild(t),t.click(),document.body.removeChild(t)},[f,y]=(0,S.useState)(null);return((0,S.useEffect)(()=>{if(!h.current)return;let e=h.current,t=()=>{a(e.currentTime),d(e.duration)},n=()=>{l(!1)};return e.addEventListener("timeupdate",t),e.addEventListener("ended",n),()=>{e.removeEventListener("timeupdate",t),e.removeEventListener("ended",n)}},[r]),Array.isArray(null==n?void 0:n.src))?(0,i.jsxs)(I.Z,{children:[(0,i.jsx)("div",{style:{position:"relative",paddingBottom:"56.25%",height:0,overflow:"hidden"},children:(0,i.jsx)("video",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},ref:h,src:null===(t=((null==n?void 0:n.src)||[])[0])||void 0===t?void 0:t.url})}),(0,i.jsxs)(I.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"info.light",padding:1,borderBottomLeftRadius:15,borderBottomRightRadius:15,boxShadow:"0px 4px 18px 0px rgb(6 0 0 / 30%)"},children:[(0,i.jsxs)(I.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,i.jsx)(T.Z,{onClick:m,children:(0,i.jsx)(w.Z,{icon:"tabler:"+(r?"pause":"player-play")})}),(0,i.jsxs)(s.Z,{variant:"body",children:[ex(o),"/",ex(c)]})]}),(0,i.jsx)(I.Z,{sx:{flexGrow:1,display:"flex",alignItems:"center",mx:2},children:(0,i.jsx)(ed.ZP,{value:o/c*100||0,disabled:!c,onChange:g})}),(0,i.jsxs)(I.Z,{children:[(null==n?void 0:n.speed)?(0,i.jsx)(T.Z,{onClick:e=>{y(e.currentTarget)},children:(0,i.jsx)(w.Z,{icon:"tabler:placeholder"})}):null,(null==n?void 0:n.download)?(0,i.jsx)(T.Z,{onClick:v,children:(0,i.jsx)(w.Z,{icon:"tabler:download"})}):null]})]}),(0,i.jsx)(N.Z,{keepMounted:!0,anchorEl:f,onClose:()=>{y(null)},open:!!f,children:eh.map((e,t)=>(0,i.jsxs)(H.Z,{onClick:()=>p(e.value),children:[e.value==u?(0,i.jsx)(F.Z,{children:(0,i.jsx)(w.Z,{icon:"tabler:check",fontSize:20})}):null,(0,i.jsx)(j.Z,{primary:e.title})]},t))})]}):(0,i.jsx)("div",{style:{position:"relative",paddingBottom:"56.25%",height:0,overflow:"hidden"},children:(0,i.jsx)("iframe",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},src:"https://www.youtube.com/embed/".concat(eu(null==n?void 0:n.src)),allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",frameBorder:"0",allowFullScreen:!0})})},ep=e=>{let{audios:t}=e;return(0,i.jsx)(c.Z,{sx:{pb:0,my:3},children:t.map((e,t)=>"youtube"==e.type?(0,i.jsx)(eg,{audio:e},t):(0,i.jsx)(em,{audio:e},t))})},ev=()=>{let e=document.querySelectorAll(".quill-image");e.forEach(e=>{try{let{link:t,data:n}=JSON.parse(e.getAttribute("data-value")),i=document.createElement("canvas"),r=i.getContext("2d"),l=new Image;l.src=t,l.crossOrigin="anonymous",l.onload=function(){i.width=n.width,i.height=n.height,r.drawImage(l,n.x,n.y,n.width,n.height,0,0,n.width,n.height),e.setAttribute("src",i.toDataURL("image/png"))}}catch(t){console.log(t.message),e.setAttribute("src","ERROR")}})},ef=()=>{let e=document.querySelectorAll(".ql-formula");e.forEach(e=>{try{let t=e.getAttribute("data-value");t&&(e.innerHTML=es.Z.renderToString(t,{throwOnError:!1}))}catch(e){console.log(e.message)}})},ej=e=>{let{details:t,customs:n,onSelectAnswer:r}=e;return(0,S.useEffect)(()=>{t&&(ev(),ef(),console.log("update",{details:t}))},[t,n.currentIndex,n.mode]),t.payload.groups.map(e=>{var l;return t.payload.questions[n.currentIndex].groupId==e.id&&"Q"==n.mode||"A"==n.mode?(0,i.jsxs)(ee.Z,{sx:{mb:10,background:"unset"},children:[e.content&&t.payload.groups.length>1?(0,i.jsx)(c.Z,{dangerouslySetInnerHTML:{__html:e.content}}):null,(null==e?void 0:null===(l=e.audios)||void 0===l?void 0:l.length)?(0,i.jsx)(ep,{audios:null==e?void 0:e.audios}):null,(0,i.jsx)(c.Z,{sx:{padding:0,":last-of-type":{pb:0}},children:t.payload.questions.filter(t=>t.groupId==e.id).map((e,l)=>{var o;return n.currentIndex==t.payload.questions.findIndex(t=>t.id==e.id)||"A"==n.mode?(0,i.jsxs)(ee.Z,{sx:{mb:5,":last-of-type":{mb:0}},id:e.id,children:[(0,i.jsx)(a.Z,{title:(0,i.jsxs)(s.Z,{variant:"body",sx:{fontWeight:700,fontSize:n.fontSize+2,color:"primary.main"},children:[e.label||"C\xe2u"," ",e.number,"."]}),sx:{paddingY:3}}),(0,i.jsx)(c.Z,{dangerouslySetInnerHTML:{__html:e.content},sx:{" p":{m:0},py:0}}),(null==e?void 0:null===(o=e.audios)||void 0===o?void 0:o.length)?(0,i.jsx)(ep,{audios:null==e?void 0:e.audios}):null,(0,i.jsx)(c.Z,{sx:{px:0,mt:3},children:(0,i.jsxs)(f.Z,{disablePadding:!0,children:[["TN","HK"].includes(e.type)?e.options.map((t,n)=>(0,i.jsx)(Z.ZP,{disablePadding:!0,divider:!0,children:(0,i.jsxs)(y.Z,{sx:{paddingX:2,":hover":{backgroundColor:"primary.main",color:"primary.contrastText"},":hover .MuiAvatar-root":{color:"primary.contrastText",backgroundColor:"primary.light"}},user:(e.answers||[]).includes(n)?"choice":"",onClick:r(e.id,n),children:[(0,i.jsx)(F.Z,{children:(0,i.jsx)(eo,{skin:(e.answers||[]).includes(n)?"static":"light",sx:{fontWeight:600},children:String.fromCharCode(65+n)})}),(0,i.jsx)(I.Z,{dangerouslySetInnerHTML:{__html:t.text},sx:{" p":{m:0},flexGrow:1}})]})},n)):null,"TF"==e.type?e.options.map((t,n)=>(0,i.jsx)(Z.ZP,{disablePadding:!0,divider:!0,children:(0,i.jsxs)(y.Z,{sx:{gap:1,cursor:"default",paddingX:2},children:[(0,i.jsx)(eo,{skin:"light",sx:{":hover":{backgroundColor:"primary.main",color:"primary.contrastText"},cursor:"pointer"},user:"T"==(e.answers||[])[n]?"choice":"",onClick:r(e.id,"".concat(n,"-T")),children:"Đ"}),(0,i.jsx)(eo,{skin:"light",sx:{":hover":{backgroundColor:"primary.main",color:"primary.contrastText"},cursor:"pointer"},user:"F"==(e.answers||[])[n]?"choice":"",onClick:r(e.id,"".concat(n,"-F")),children:"S"}),(0,i.jsx)(eo,{skin:"light",color:"secondary",sx:{fontWeight:600},children:String.fromCharCode(97+n)}),(0,i.jsx)(I.Z,{dangerouslySetInnerHTML:{__html:t.text},sx:{" p":{m:0},flexGrow:1}})]})},n)):null]})}),"TL"==e.type?(0,i.jsxs)(c.Z,{sx:{px:2},children:[(0,i.jsx)(M.Z,{sx:{fontWeight:600},children:"B\xe0i l\xe0m"}),(0,i.jsx)(ec,{value:(null==e?void 0:e.answers[0])||"",rows:3,multiline:!0,placeholder:"Vui l\xf2ng nhập b\xe0i l\xe0m của bạn v\xe0o đ\xe2y",onChange:t=>r(e.id,t)()})]}):null,"DT"==e.type?(0,i.jsxs)(c.Z,{sx:{px:2},children:[(0,i.jsx)(M.Z,{sx:{fontWeight:600},children:"Đ\xe1p \xe1n của bạn"}),(0,i.jsx)(ec,{value:(null==e?void 0:e.answers[0])||"",onChange:t=>r(e.id,t)(),sx:{marginX:2},placeholder:"Vui l\xf2ng nhập đ\xe1p \xe1n của bạn v\xe0o đ\xe2y"})]}):null]},e.id):null})})]},e.id):null})},{Grid:ey}=n(2237),eZ=e=>{let{details:t,customs:n,setDetails:r,setCustoms:l,moveToQuestion:o,onSelectAnswer:s}=e;return(0,i.jsxs)(ey,{container:!0,spacing:3,sx:{marginY:15,paddingX:3,fontSize:n.fontSize},children:[(0,i.jsx)(ey,{item:!0,xs:12,lg:9,children:(0,i.jsx)(ej,{details:t,customs:n,setDetails:r,setCustoms:l,onSelectAnswer:s})}),(0,i.jsx)(ey,{item:!0,xs:12,lg:3,sx:{display:{lg:"block",md:"none",xs:"none"}},children:(0,i.jsx)(et,{details:t,moveToQuestion:o})})]})};var eb=n(9058);let ew=e=>{let{details:t,customs:n,onClose:r,onSelectAnswer:l}=e;return(0,i.jsxs)(eb.ZP,{anchor:"right",open:n.panel,onClose:r,sx:{".MuiDrawer-paper":{minWidth:"15rem"}},children:[(0,i.jsx)(s.Z,{variant:"h4",sx:{textAlign:"center",p:3},children:"BẢNG Đ\xc1P \xc1N"}),(0,i.jsx)(f.Z,{children:t.payload.questions.map((e,t)=>(0,i.jsx)(Z.ZP,{sx:{paddingY:.5},children:(0,i.jsxs)(I.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:1},children:[(0,i.jsx)(eo,{sx:{cursor:"pointer"},onClick:l(e.id,-1,"p"),children:null==e?void 0:e.number}),((null==e?void 0:e.options)||[]).map((t,n)=>(0,i.jsx)(eo,{skin:"light",user:(e.answers||[]).includes(n)||(e.answers||[])[n]&&"TF"==e.type?"choice":"",sx:{cursor:"pointer",":hover":{backgroundColor:"primary.main",color:"primary.contrastText"}},onClick:l(e.id,n,"b"),children:String.fromCharCode(65+n)},n))]})},t))})]})};var eS=n(2067),ek=n(9609);let eC=e=>{var t,n,r,l,o,a;let{details:c,submitQuiz:d}=e,[u,x]=(0,S.useState)(null);return(0,S.useEffect)(()=>{var e;let t=c.payload.times.current,n=6e4*((null===(e=c.payload.settings)||void 0===e?void 0:e.timeout)||90)-t+c.payload.times.startAt,i=setInterval(()=>{var e;n-=1e3,x(t+=1e3),document.title=(0,ek.convertMilliseconds)(6e4*((null===(e=c.payload.settings)||void 0===e?void 0:e.timeout)||90)-t+c.payload.times.startAt)+" - ".concat(c.payload.settings.title),n<1e3&&(console.log("Hết giờ",n),d(!0)(),clearInterval(i))},1e3);return()=>{i&&clearInterval(i)}},[null==c?void 0:null===(t=c.payload)||void 0===t?void 0:t.times]),(0,i.jsxs)(I.Z,{sx:{position:"fixed",top:0,left:0,maxHeight:"3.25rem",background:"linear-gradient(    to right,    #ff4b2b7a,    #ff416c78  )",width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:1,mX:5,color:"#fff",zIndex:350},children:[(0,i.jsxs)(I.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",ml:3},children:[(0,i.jsx)(s.Z,{variant:"h5",children:null==c?void 0:null===(n=c.payload)||void 0===n?void 0:n.student}),(0,i.jsx)(s.Z,{variant:"body",children:(0,L.default)(u).format("HH:mm DD/MM/YYYY")})]}),(0,i.jsxs)(I.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",mr:3},children:[(0,i.jsx)(eS.Z,{color:c.online?"success":"error",variant:"dot",anchorOrigin:{vertical:"bottom",horizontal:"left"},children:(0,i.jsx)(s.Z,{variant:"h3",sx:{fontWeight:700},children:u&&(0,ek.convertMilliseconds)(6e4*((null===(r=c.payload.settings)||void 0===r?void 0:r.timeout)||90)-u+c.payload.times.startAt)})}),(0,i.jsxs)(s.Z,{variant:"body",children:["Đ\xe3 l\xe0m"," ",null==c?void 0:null===(l=c.payload)||void 0===l?void 0:l.questions.filter(e=>"TF"==e.type&&(e.answers||[]).filter(e=>e).length||"TF"!=e.type&&(e.answers||[]).filter(e=>e.toString().trim()).length).length,"/",null==c?void 0:null===(o=c.payload)||void 0===o?void 0:null===(a=o.questions)||void 0===a?void 0:a.length]})]})]})},eE=e=>{let{handleClick:t,customs:n}=e;return(0,i.jsx)(I.Z,{sx:{position:"fixed",right:"-116px",top:"30%",background:"rgb(0 0 0 / 6%)",boxShadow:"10px 0 30px #888",borderRadius:"10px 0 0 10px",".MuiListItemButton-root":{paddingLeft:3},":hover":{right:0,background:"#fff"}},children:(0,i.jsxs)(f.Z,{children:[(0,i.jsx)(Z.ZP,{disablePadding:!0,onClick:t("increase"),children:(0,i.jsxs)(y.Z,{children:[(0,i.jsx)(F.Z,{children:(0,i.jsx)(w.Z,{icon:"tabler:zoom-in",fontSize:20})}),(0,i.jsx)(j.Z,{primary:"Tăng cỡ chữ"})]})}),(0,i.jsx)(Z.ZP,{disablePadding:!0,onClick:t("reduce"),children:(0,i.jsxs)(y.Z,{children:[(0,i.jsx)(F.Z,{children:(0,i.jsx)(w.Z,{icon:"tabler:zoom-out",fontSize:20})}),(0,i.jsx)(j.Z,{primary:"Giảm cỡ chữ"})]})}),"Q"!=n.showQuestions?(0,i.jsx)(Z.ZP,{disablePadding:!0,onClick:t("viewone"),children:(0,i.jsxs)(y.Z,{children:[(0,i.jsx)(F.Z,{children:(0,i.jsx)(w.Z,{icon:"tabler:list-letters",fontSize:20})}),(0,i.jsx)(j.Z,{primary:"A"==n.mode?"Hiện từng c\xe2u":"Hiện tất cả"})]})}):null,(0,i.jsx)(Z.ZP,{disablePadding:!0,onClick:t("answers"),children:(0,i.jsxs)(y.Z,{children:[(0,i.jsx)(F.Z,{children:(0,i.jsx)(w.Z,{icon:"tabler:checkup-list",fontSize:20})}),(0,i.jsx)(j.Z,{primary:"Bảng đ\xe1p \xe1n"})]})})]})})};var eI=n(5889),eT=n(6489);let eL=e=>!!e&&(void 0!==e.movementX&&void 0!==e.movementY?0===e.movementX&&0===e.movementY&&0===e.clientX&&0===e.clientY&&0===e.screenX&&0===e.screenY:"click"!==e.type||"mouse"!==e.pointerType&&"pen"!==e.pointerType&&!1),eP=e=>{let{details:t,setDetails:n,socket:l,exams:o}=e,s=(0,r.useRouter)(),[a,c]=(0,S.useState)({fontSize:16,mode:t.payload.settings.showQuestions||"A",currentIndex:0,maxQuestions:t.payload.questions.length,panel:!1,showQuestions:t.payload.settings.showQuestions||"A"}),d=e=>()=>{switch(console.log({customs:a,event:e}),e){case"answers":c(e=>({...e,panel:!e.panel}));break;case"increase":c(e=>({...e,fontSize:Math.min(e.fontSize+2,30)}));break;case"reduce":c(e=>({...e,fontSize:Math.max(e.fontSize-2,10)}));break;case"viewone":setTimeout(()=>{var e,n,i=document.getElementById(null===(e=null===(n=t.payload)||void 0===n?void 0:n.questions[a.currentIndex])||void 0===e?void 0:e.id);if(i){var r=i.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:r-100,behavior:"smooth"})}},300),c(e=>({...e,mode:"A"==e.mode?"Q":"A"}))}},u=e=>{var n;let i=JSON.parse(localStorage.getItem("logs_"+o.id)||"[]");i.push({...e,t:new Date().getTime(),id:null==t?void 0:null===(n=t.payload)||void 0===n?void 0:n.id}),localStorage.setItem("logs_"+o.id,JSON.stringify(i))},x=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return i=>{if(console.log("handleSubmitQuiz"),!t.loading){if(e)l.readyState===WebSocket.OPEN&&(l.send(JSON.stringify({action:"submit",payload:{s:"timeout"}})),n(e=>({...e,loading:!0}))),setTimeout(()=>{var e;s.push("".concat(window.location.pathname,"?id=").concat((null==t?void 0:null===(e=t.payload)||void 0===e?void 0:e.id)||""))},1500);else{var r,o,a,c,d,u=(null==t?void 0:null===(r=t.payload)||void 0===r?void 0:null===(o=r.questions)||void 0===o?void 0:o.length)-(null==t?void 0:null===(a=t.payload)||void 0===a?void 0:a.questions.filter(e=>"TF"==e.type&&(e.answers||[]).filter(e=>e).length||"TF"!=e.type&&(e.answers||[]).filter(e=>e.toString().trim()).length).length);let e=(null==t?void 0:null===(c=t.payload)||void 0===c?void 0:null===(d=c.settings)||void 0===d?void 0:d.require)=="T";if(e&&u){O().fire({title:"Vui l\xf2ng ho\xe0n th\xe0nh tất cả c\xe1c c\xe2u hỏi trước khi nộp b\xe0i.",html:'<div style="font-weight: 600; color : red; padding : 10px 0">Bạn c\xf2n '.concat(u.toString().padStart(2,"0")," c\xe2u hỏi chưa trả lời.</div>"),icon:"error",confirmButtonText:"Đ\xe3 hiểu"});return}var x='<div style="text-align:justify">Khi x\xe1c nhận nhấn nộp b\xe0i, bạn sẽ kh\xf4ng thể sửa lại b\xe0i thi của m\xecnh. H\xe3y chắc chắn bạn đ\xe3 xem lại tất cả c\xe1c đ\xe1p \xe1n. Ch\xfac bạn may mắn!</div>';x=u?'<div style="font-weight: 600; color : red; padding : 10px 0">Bạn c\xf2n '.concat(u.toString().padStart(2,"0")," c\xe2u hỏi chưa trả lời.</div>")+x:x,O().fire({title:"Bạn c\xf3 chắc chắn muốn nộp b\xe0i?",html:x,icon:"warning",showCancelButton:!0,cancelButtonText:"Tiếp tục l\xe0m",confirmButtonText:"Nộp b\xe0i ngay"}).then(e=>{e.isConfirmed&&(l.readyState===WebSocket.OPEN?(l.send(JSON.stringify({action:"submit",payload:{s:"user"}})),n(e=>({...e,loading:!0}))):O().fire({icon:"error",title:"Kiểm tra kết nối Internet",html:"Hiện tại thiết bị của bạn kh\xf4ng c\xf3 kết nối mạng. Vui l\xf2ng kết nối mạng v\xe0 thử lại. H\xe3y lu\xf4n duy tr\xec mạng Internet để l\xe0m b\xe0i thi n\xe0y."}),n(e=>({...e,loading:!0})))})}}}},h=e=>function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n&&c(n=>({...n,currentIndex:t.payload.questions.findIndex(t=>t.id===e)}));var i=document.getElementById(e);if(i){var r=i.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:r-100,behavior:"smooth"})}},m=()=>{c(e=>({...e,panel:!1}))},g=function(e,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"u";return o=>{c(n=>({...n,currentIndex:t.payload.questions.findIndex(t=>t.id===e)})),["p","b"].includes(r)&&h(e)(),-1!=parseInt(i)&&n(t=>{let n={...t.payload,questions:t.payload.questions.map(n=>{if(n.id===e){var s=t.payload.groups.findIndex(e=>e.id==n.groupId),a=[],c=[];switch(n.type){case"TN":case"MN":case"DT":case"TL":a=[i],c={v:i};break;case"TF":a=(null==n?void 0:null===(d=n.answers)||void 0===d?void 0:d.length)?null==n?void 0:n.answers:Array(n.options.length).fill("");var d,[x,h]=i.toString().split("-");h&&(a[x]=h,c={v:i,p:x},c={i:x,v:h});break;case"HK":(a=(null==n?void 0:n.answers)||[]).includes(i)?(a=a.filter(e=>e!=i),c={v:i,t:"r"}):(a.push(i),c={v:i,t:"a"})}return l.readyState===WebSocket.OPEN?l.send(JSON.stringify({action:"answers",payload:{answers:a,...c,id:n.id,n:n.number,s:r,g:s,c:eL(o)?"j":"m"}})):u({action:"answers",payload:{answers:a,...c,id:n.id,n:n.number,s:r,g:s,c:eL(o)?"j":"m"}}),{...n,answers:a}}return n})};return{...t,payload:n}}),console.log(e,i,o),v()}},p=e=>()=>{c(t=>({...t,currentIndex:e}))},v=()=>{console.log("openFullScreen"),document.documentElement.requestFullscreen?document.documentElement.requestFullscreen().catch(e=>{console.log("Error attempting to enable full-screen mode: ".concat(e.message," (").concat(e.name,")"))}):document.documentElement.webkitRequestFullscreen?document.documentElement.webkitRequestFullscreen().catch(e=>{console.log("Error attempting to enable full-screen mode: ".concat(e.message," (").concat(e.name,")"))}):document.documentElement.msRequestFullscreen&&document.documentElement.msRequestFullscreen().catch(e=>{console.log("Error attempting to enable full-screen mode: ".concat(e.message," (").concat(e.name,")"))})},f=()=>{document.exitFullscreen?document.exitFullscreen().catch(e=>{console.log("Error attempting to exit full-screen mode: ".concat(e.message," (").concat(e.name,")"))}):document.webkitExitFullscreen?document.webkitExitFullscreen().catch(e=>{console.log("Error attempting to exit full-screen mode: ".concat(e.message," (").concat(e.name,")"))}):document.msExitFullscreen&&document.msExitFullscreen().catch(e=>{console.log("Error attempting to exit full-screen mode: ".concat(e.message," (").concat(e.name,")"))})};return(0,S.useEffect)(()=>(v(),()=>{f()}),[]),(0,i.jsxs)("div",{children:[(0,i.jsx)(eC,{details:t,submitQuiz:x}),(0,i.jsx)(eZ,{details:t,customs:a,setDetails:n,setCustoms:c,moveToQuestion:h,onSelectAnswer:g}),(0,i.jsx)(eE,{handleClick:d,customs:a}),(0,i.jsx)(ew,{details:t,customs:a,onClose:m,onSelectAnswer:g}),(0,i.jsx)($,{customs:a,setIndex:p,submitQuiz:x}),(0,i.jsx)(eI.Z,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:!!t.loading,children:(0,i.jsx)(eT.Z,{color:"inherit"})})]})};var eW=n(9685);let ez=e=>{let{payload:t}=e,[n,r]=(0,S.useState)(0);return(0,S.useEffect)(()=>{r(t.startTime-t.currentTime);let e=setInterval(()=>{r(e=>(e<0&&window.location.reload(),e-1e3))},1e3);return()=>{clearInterval(e)}},[]),(0,i.jsxs)(c.Z,{sx:{paddingY:2},children:[(0,i.jsx)(s.Z,{sx:{textAlign:"center",color:"primary.main",marginY:3,fontWeight:600},variant:"h5",children:"ĐỀ THI SẼ BẮT ĐẦU SAU"}),(0,i.jsxs)(s.Z,{variant:"h3",sx:{textAlign:"center",color:"error.main",marginY:3,fontWeight:600},children:[" ",(0,ek.convertMilliseconds)(n)]})]})},eN=e=>{let{payload:t,setDetails:n,handleClick:r}=e;return(0,i.jsxs)(c.Z,{sx:{paddingY:2},children:[(0,i.jsx)(s.Z,{sx:{textAlign:"center",color:"primary.main",marginY:3,fontWeight:600},variant:"h5",children:"VUI L\xd2NG ĐĂNG NHẬP ĐỂ L\xc0M B\xc0I"}),t.map((e,t)=>(0,S.createElement)(ea.Z,{...e,key:t,fullWidth:!0,sx:{mb:2},onChange:e=>n(n=>({...n,payload:n.payload.map((n,i)=>i===t?{...n,value:e.target.value}:n)}))})),(0,i.jsx)(z.Z,{fullWidth:!0,variant:"contained",endIcon:(0,i.jsx)(w.Z,{icon:"tabler:login-2"}),onClick:r,sx:{marginY:3},children:"Đăng nhập"})]})},eH=e=>{let{payload:t,setDetails:n,handleClick:r}=e;return(0,i.jsxs)(c.Z,{sx:{paddingY:2},children:[(0,i.jsx)(s.Z,{sx:{textAlign:"center",color:"primary.main",marginY:3,fontWeight:600},variant:"h5",children:"VUI L\xd2NG NHẬP MẬT KHẨU ĐỂ L\xc0M B\xc0I THI"}),t.map((e,t)=>(0,S.createElement)(ea.Z,{...e,key:t,fullWidth:!0,sx:{mb:2},onChange:e=>n(n=>({...n,payload:n.payload.map((n,i)=>i===t?{...n,value:e.target.value}:n)}))})),(0,i.jsx)(z.Z,{fullWidth:!0,variant:"contained",endIcon:(0,i.jsx)(w.Z,{icon:"tabler:login-2"}),onClick:r,sx:{marginY:3},children:"Mở kh\xf3a đề thi"})]})},eM=e=>{let{payload:t,setDetails:n,handleClick:r}=e;return(0,i.jsxs)(c.Z,{sx:{paddingY:2},children:[(0,i.jsx)(s.Z,{sx:{textAlign:"center",color:"primary.main",marginY:3,fontWeight:600},variant:"h5",children:"HO\xc0N TH\xc0NH C\xc1C TH\xd4NG TIN DƯỚI Đ\xc2Y"}),t.map((e,t)=>(0,S.createElement)(ea.Z,{...e,key:t,fullWidth:!0,sx:{mb:2},onChange:e=>n(n=>({...n,payload:n.payload.map((n,i)=>i===t?{...n,value:e.target.value}:n)})),autoFocus:!t,autoComplete:"off"})),(0,i.jsx)(z.Z,{fullWidth:!0,variant:"contained",endIcon:(0,i.jsx)(w.Z,{icon:"tabler:login-2"}),onClick:r,sx:{marginY:3},children:"Bắt đầu l\xe0m b\xe0i"})]})},eF=e=>{let{details:t,setDetails:n,exams:r,handleClick:l}=e;return(0,i.jsxs)(ee.Z,{sx:{maxWidth:600,width:"100%"},children:[(0,i.jsx)("img",{src:r.setting.cover,title:r.setting.title,style:{maxHeight:314,width:"100%"},alt:r.setting.title}),(0,i.jsxs)(c.Z,{sx:{paddingY:2},children:[(0,i.jsx)(s.Z,{gutterBottom:!0,variant:"h4",component:"div",sx:{fontWeight:700,fontSize:"1.5rem"},children:r.setting.title}),(0,i.jsx)(s.Z,{variant:"body",color:"text.secondary",dangerouslySetInnerHTML:{__html:r.setting.subtitle},sx:{fontSize:"1rem",textAlign:"justify"}})]}),(0,i.jsx)(c.Z,{sx:{paddingY:2},children:(0,i.jsxs)(f.Z,{children:[(0,i.jsxs)(Z.ZP,{sx:{paddingY:1},children:[(0,i.jsx)(F.Z,{children:(0,i.jsx)(w.Z,{icon:"tabler:clock",fontSize:20})}),(0,i.jsx)(j.Z,{primary:"Thời gian l\xe0m b\xe0i"}),(0,i.jsxs)(eW.Z,{sx:{fontWeight:600,color:"success.main"},children:[r.setting.timeout," ph\xfat"]})]}),(0,i.jsxs)(Z.ZP,{sx:{paddingY:1},children:[(0,i.jsx)(F.Z,{children:(0,i.jsx)(w.Z,{icon:"tabler:help-octagon",fontSize:20})}),(0,i.jsx)(j.Z,{primary:"Số lượng c\xe2u hỏi"}),(0,i.jsxs)(eW.Z,{sx:{fontWeight:600,color:"success.main"},children:[r.setting.numberQuestions," c\xe2u"]})]}),(0,i.jsxs)(Z.ZP,{sx:{paddingY:1},children:[(0,i.jsx)(F.Z,{children:(0,i.jsx)(w.Z,{icon:"tabler:browser-check",fontSize:20})}),(0,i.jsx)(j.Z,{primary:"Loại đề"}),(0,i.jsx)(eW.Z,{sx:{fontWeight:600,color:"success.main"},children:r.setting.quizType})]}),(0,i.jsxs)(Z.ZP,{sx:{paddingY:1},children:[(0,i.jsx)(F.Z,{children:(0,i.jsx)(w.Z,{icon:"tabler:users",fontSize:20})}),(0,i.jsx)(j.Z,{primary:"Số lượt l\xe0m đề"}),(0,i.jsx)(eW.Z,{sx:{fontWeight:600,color:"success.main"},children:parseInt(r.setting.retake)?r.setting.retake+" lượt":"Kh\xf4ng giới hạn"})]})]})}),(0,i.jsx)(M.Z,{}),"requireLogin"!=t.action||t.loading?null:(0,i.jsx)(eN,{payload:t.payload,setDetails:n,handleClick:l}),"password"!=t.action||t.loading?null:(0,i.jsx)(eH,{payload:t.payload,setDetails:n,handleClick:l}),"comming"!=t.action||t.loading?null:(0,i.jsx)(ez,{payload:t.payload}),"timeout"!=t.action||t.loading?null:(0,i.jsx)(c.Z,{sx:{paddingY:2},children:(0,i.jsx)(s.Z,{sx:{textAlign:"center",color:"error.main",marginY:3,fontWeight:600},variant:"h5",children:"ĐỀ THI N\xc0Y Đ\xc3 KẾT TH\xdaC"})}),"toLimit"!=t.action||t.loading?null:(0,i.jsx)(c.Z,{sx:{paddingY:2},children:(0,i.jsx)(s.Z,{sx:{textAlign:"center",color:"error.main",marginY:3,fontWeight:600},variant:"h5",children:"BẠN Đ\xc3 HẾT LƯỢT L\xc0M ĐỀ THI N\xc0Y"})}),"requireCollects"!=t.action||t.loading?null:(0,i.jsx)(eM,{payload:t.payload,setDetails:n,handleClick:l}),t.loading?(0,i.jsxs)(c.Z,{sx:{textAlign:"center"},children:[(0,i.jsx)(eT.Z,{}),(0,i.jsx)(s.Z,{sx:{color:"primary.main",mb:2,fontWeight:600},variant:"h5",children:"Vui l\xf2ng đợi..."})]}):null]})},eA=e=>{let{exams:t}=e;return(0,i.jsxs)(ee.Z,{children:[(0,i.jsx)("img",{src:t.setting.cover,title:t.setting.title,style:{maxHeight:314,width:"100%"},alt:t.setting.title}),(0,i.jsxs)(c.Z,{sx:{paddingY:2},children:[(0,i.jsx)(s.Z,{gutterBottom:!0,variant:"h4",component:"div",sx:{fontWeight:700,fontSize:"1.5rem"},children:t.setting.title}),(0,i.jsx)(s.Z,{variant:"body",color:"text.secondary",dangerouslySetInnerHTML:{__html:t.setting.subtitle},sx:{fontSize:"1rem",textAlign:"justify"}})]}),(0,i.jsx)(c.Z,{sx:{paddingY:2}})]})},eR=e=>Math.floor(e/36e5).toString().padStart(2,"0")+":"+Math.floor((e%=36e5)/6e4).toString().padStart(2,"0")+":"+Math.floor((e%=6e4)/1e3).toString().padStart(2,"0"),eq=e=>{var t,n,r,l,o,a,d;let{details:u}=e,x=null==u?void 0:null===(t=u.payload)||void 0===t?void 0:t.Username,{collects:h=[],comments:m={}}=(null==u?void 0:null===(n=u.payload)||void 0===n?void 0:n.details)||{},g=(null==u?void 0:null===(r=u.payload)||void 0===r?void 0:r.overview)||{};return(0,i.jsx)(ee.Z,{children:(null==u?void 0:null===(l=u.payload)||void 0===l?void 0:l.error)?(0,i.jsx)(c.Z,{sx:{minWidth:800,color:"red",fontWeight:600,textAlign:"center",fontSize:"1.5rem"},children:null==u?void 0:null===(o=u.payload)||void 0===o?void 0:o.error}):(0,i.jsxs)(B.ZP,{container:!0,spacing:6,children:[(0,i.jsx)(B.ZP,{item:!0,sm:4,xs:12,sx:{pt:["0 !important","1.5rem !important"],pl:["1.5rem !important","0 !important"]},children:(0,i.jsxs)(c.Z,{sx:{height:"100%",display:"flex",textAlign:"center",alignItems:"center",justifyContent:"center",backgroundColor:"action.hover",flexDirection:"column",p:e=>"".concat(e.spacing(18,5,16)," !important")},children:[(0,i.jsx)(s.Z,{variant:"h6",sx:{lineHeight:1,fontWeight:600,fontSize:"3.75rem !important",color:"error.main"},children:-1==g.point?"...":parseFloat(g.point).toFixed(2)}),(0,i.jsx)("span",{children:"điểm"})]})}),(0,i.jsx)(B.ZP,{item:!0,xs:12,sm:8,children:(0,i.jsxs)(c.Z,{sx:{p:e=>"".concat(e.spacing(3.25,5.75,6.25)," !important")},children:[m[null==u?void 0:null===(a=u.payload)||void 0===a?void 0:a.ResultId]?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.Z,{variant:"h5",sx:{mb:3.5,textAlign:"center"},children:"Nhận x\xe9t của gi\xe1o vi\xean"}),(0,i.jsx)(s.Z,{variant:"h5",sx:{color:"error.main",fontStyle:"italic"},children:m[null==u?void 0:null===(d=u.payload)||void 0===d?void 0:d.ResultId]})]}):null,x?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(M.Z,{sx:{mt:2},children:"Th\xf4ng tin th\xed sinh"}),(0,i.jsxs)(f.Z,{children:[(0,i.jsx)(Z.ZP,{disablePadding:!0,children:(0,i.jsxs)(F.Z,{sx:{alignItems:"center",color:"primary.main"},children:[(0,i.jsx)(w.Z,{icon:"tabler:user-bolt",fontSize:20}),(0,i.jsxs)(j.Z,{sx:{fontWeight:600,ml:1},disableTypography:!0,children:["Họ v\xe0 t\xean: ",null==x?void 0:x.fullname]})]})}),(0,i.jsx)(Z.ZP,{disablePadding:!0,children:(0,i.jsxs)(F.Z,{sx:{alignItems:"center",color:"primary.main"},children:[(0,i.jsx)(w.Z,{icon:"tabler:cash-banknote",fontSize:20}),(0,i.jsxs)(j.Z,{sx:{fontWeight:600,ml:1},disableTypography:!0,children:["Lớp: ",null==x?void 0:x.classes]})]})}),(0,i.jsx)(Z.ZP,{disablePadding:!0,children:(0,i.jsxs)(F.Z,{sx:{alignItems:"center",color:"primary.main"},children:[(0,i.jsx)(w.Z,{icon:"tabler:school",fontSize:20}),(0,i.jsxs)(j.Z,{sx:{fontWeight:600,ml:1},disableTypography:!0,children:["Trường: ",null==x?void 0:x.school]})]})})]})]}):null,h.length?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(M.Z,{sx:{mt:2},children:"Th\xf4ng tin thu thập"}),(0,i.jsx)(f.Z,{children:h.map((e,t)=>(0,i.jsx)(Z.ZP,{disablePadding:!0,children:(0,i.jsxs)(F.Z,{sx:{alignItems:"center",color:"primary.main"},children:[(0,i.jsx)(w.Z,{icon:"tabler:point",fontSize:20}),(0,i.jsxs)(j.Z,{sx:{fontWeight:600,ml:1},disableTypography:!0,children:[null==e?void 0:e.label,": ",null==e?void 0:e.value]})]})},t))})]}):null,(0,i.jsx)(M.Z,{sx:{mt:2},children:"Tổng quan"}),(0,i.jsxs)(f.Z,{children:[(0,i.jsx)(Z.ZP,{disablePadding:!0,children:(0,i.jsxs)(F.Z,{sx:{alignItems:"center",color:"warning.main"},children:[(0,i.jsx)(w.Z,{icon:"tabler:clock",fontSize:20}),(0,i.jsx)(j.Z,{sx:{fontWeight:600,ml:1},disableTypography:!0,children:"Thời gian l\xe0m b\xe0i:"}),(0,i.jsx)(eW.Z,{sx:{fontWeight:600,fontSize:"1.2rem"},children:eR(g.time)})]})}),(0,i.jsx)(Z.ZP,{disablePadding:!0,children:(0,i.jsxs)(F.Z,{sx:{alignItems:"center",color:"success.main"},children:[(0,i.jsx)(w.Z,{icon:"tabler:circle-check",fontSize:20}),(0,i.jsx)(j.Z,{sx:{fontWeight:600,ml:1},disableTypography:!0,children:"Số c\xe2u trắc nghiệm đ\xfang"}),(0,i.jsx)(eW.Z,{sx:{fontWeight:600,fontSize:"1.2rem"},children:g.right})]})}),(0,i.jsx)(Z.ZP,{disablePadding:!0,children:(0,i.jsxs)(F.Z,{sx:{alignItems:"center",color:"error.main"},children:[(0,i.jsx)(w.Z,{icon:"tabler:circle-x",fontSize:20}),(0,i.jsx)(j.Z,{sx:{fontWeight:600,ml:1},disableTypography:!0,children:"Số c\xe2u trắc nghiệm sai"}),(0,i.jsx)(eW.Z,{sx:{fontWeight:600,fontSize:"1.2rem"},children:g.error})]})}),(0,i.jsx)(Z.ZP,{disablePadding:!0,children:(0,i.jsxs)(F.Z,{sx:{alignItems:"center"},children:[(0,i.jsx)(w.Z,{icon:"tabler:sum",fontSize:20}),(0,i.jsx)(j.Z,{sx:{fontWeight:600,ml:1},disableTypography:!0,children:"Tổng số c\xe2u hỏi trong đề"}),(0,i.jsx)(eW.Z,{sx:{fontWeight:600,fontSize:"1.2rem"},children:g.total})]})})]})]})})]})})};var e_=S.memo(eq),eO=n(6003),eY=n(6010);let eB=e=>{let{sx:t,skin:n,color:r,rounded:l}=e,o=el(),s={primary:{...o.primaryLight},secondary:{...o.secondaryLight},success:{...o.successLight},error:{...o.errorLight},warning:{...o.warningLight},info:{...o.infoLight}},a={...e};return a.rounded=void 0,(0,i.jsx)(eO.Z,{...a,variant:"filled",className:(0,eY.Z)({"MuiChip-rounded":l,"MuiChip-light":"light"===n}),sx:"light"===n&&r?Object.assign(s[r],t):t})},eD=()=>{let e=document.querySelectorAll(".quill-image");e.forEach(e=>{try{let{link:t,data:n}=JSON.parse(e.getAttribute("data-value")),i=document.createElement("canvas"),r=i.getContext("2d"),l=new Image;l.src=t,l.crossOrigin="anonymous",l.onload=function(){i.width=n.width,i.height=n.height,r.drawImage(l,n.x,n.y,n.width,n.height,0,0,n.width,n.height),e.setAttribute("src",i.toDataURL("image/png"))}}catch(e){console.log(e.message)}})},eJ=()=>{let e=document.querySelectorAll(".ql-formula");e.forEach(e=>{try{let t=e.getAttribute("data-value");t&&(e.innerHTML=es.Z.renderToString(t,{throwOnError:!1}))}catch(e){console.log(e.message)}})},eG=e=>{var t,n,r,l,o;let{details:d}=e;return(0,S.useEffect)(()=>{d&&(eD(),eJ())},[null==d?void 0:null===(t=d.payload)||void 0===t?void 0:null===(n=t.details)||void 0===n?void 0:n.questions]),null==d?void 0:null===(r=d.payload)||void 0===r?void 0:null===(l=r.details)||void 0===l?void 0:null===(o=l.groups)||void 0===o?void 0:o.map(e=>{var t,n,r,l;return(0,i.jsxs)(ee.Z,{sx:{mt:10,background:"unset"},children:[e.content&&(null==d?void 0:null===(t=d.payload)||void 0===t?void 0:null===(n=t.details)||void 0===n?void 0:n.groups.length)>1?(0,i.jsx)(c.Z,{dangerouslySetInnerHTML:{__html:e.content}}):null,(0,i.jsx)(c.Z,{sx:{padding:0,":last-of-type":{pb:0}},children:null==d?void 0:null===(r=d.payload)||void 0===r?void 0:null===(l=r.details)||void 0===l?void 0:l.questions.filter(t=>t.groupId==e.id).map((e,t)=>(0,i.jsxs)(ee.Z,{sx:{mb:5,":last-of-type":{mb:0}},id:e.id,children:[(0,i.jsx)(a.Z,{title:(0,i.jsxs)(s.Z,{variant:"body",sx:{fontWeight:700,color:"primary.main",fontSize:"1.3rem"},children:[e.label||"C\xe2u"," ",e.number,"."]}),action:(0,i.jsx)(s.Z,{variant:"body",sx:{fontWeight:700,color:"success.main"},children:-1==e.point?"":parseFloat(e.point).toFixed(2)+" điểm"}),sx:{paddingY:3}}),(0,i.jsx)(c.Z,{dangerouslySetInnerHTML:{__html:e.content},sx:{" p":{m:0},py:0}}),(0,i.jsx)(c.Z,{sx:{px:1,mt:3},children:(0,i.jsxs)(f.Z,{disablePadding:!0,children:[["TN","HK"].includes(e.type)?e.options.map((e,t)=>(0,i.jsxs)(Z.ZP,{sx:{borderRadius:1,mb:1,border:"1px solid #b2b2b299"},user:e.user||"",children:[(0,i.jsx)(F.Z,{children:(0,i.jsx)(eo,{skin:(null==e?void 0:e.user)?"static":"light",sx:{fontWeight:600},children:String.fromCharCode(65+t)})}),(0,i.jsx)(I.Z,{dangerouslySetInnerHTML:{__html:e.text},sx:{" p":{m:0},flexGrow:1}})]},t)):null,"TF"==e.type?e.options.map((e,t)=>(0,i.jsxs)(Z.ZP,{divider:!0,sx:{gap:1,cursor:"default",paddingX:2},children:[(0,i.jsx)(eo,{skin:"light",user:(null==e?void 0:e.user[0])||"",children:"Đ"}),(0,i.jsx)(eo,{skin:"light",user:(null==e?void 0:e.user[1])||"",children:"S"}),(0,i.jsx)(eo,{skin:"light",color:"secondary",sx:{fontWeight:600},children:String.fromCharCode(97+t)}),(0,i.jsx)(I.Z,{dangerouslySetInnerHTML:{__html:e.text},sx:{" p":{m:0},flexGrow:1}})]},t)):null]})}),"TL"==e.type?(0,i.jsxs)(c.Z,{sx:{px:2},children:[(0,i.jsx)(M.Z,{sx:{fontWeight:600},children:"B\xe0i l\xe0m của bạn"}),(0,i.jsx)(I.Z,{dangerouslySetInnerHTML:{__html:((null==e?void 0:e.answers)||[])[0]||""},sx:{" p":{m:0}}})]}):null,"DT"==e.type?(0,i.jsx)(c.Z,{sx:{px:2},children:(0,i.jsxs)(B.ZP,{container:!0,spacing:3,children:[(0,i.jsxs)(B.ZP,{item:!0,xs:12,md:6,children:[(0,i.jsx)(M.Z,{sx:{fontWeight:600},children:"Đ\xe1p \xe1n của bạn"}),(0,i.jsx)(I.Z,{dangerouslySetInnerHTML:{__html:((null==e?void 0:e.answers)||[])[0]||""},sx:{" p":{m:0}}})]}),(0,i.jsx)(B.ZP,{item:!0,xs:12,md:6,sx:{color:"success.main"},children:e.options.length?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(M.Z,{sx:{fontWeight:600},children:"Đ\xe1p \xe1n đ\xfang"}),e.options.map((e,t)=>(0,i.jsx)(eB,{label:e.text,skin:"light",color:"success",sx:{mr:1,fontWeight:600}},t))]}):null})]})}):null,(null==e?void 0:e.explain)?(0,i.jsxs)(c.Z,{sx:{backgroundColor:"info.light",color:"info.contrastText"},children:[(0,i.jsx)(M.Z,{sx:{fontWeight:600,pt:2},children:"Hướng dẫn giải"}),(0,i.jsx)(I.Z,{dangerouslySetInnerHTML:{__html:e.explain||"Chưa c\xf3 hướng dẫn giải"},sx:{" p":{m:0}}})]}):null]},e.id))})]},e.id)})};var eQ=S.memo(eG);let eK=e=>{let{exams:t,details:n}=e;return(0,i.jsx)(I.Z,{sx:{display:"flex",justifyContent:"center",marginY:3},children:(0,i.jsx)(I.Z,{sx:{maxWidth:1200},children:(0,i.jsxs)(B.ZP,{container:!0,spacing:3,children:[(0,i.jsx)(B.ZP,{item:!0,md:4,xs:12,children:(0,i.jsx)(eA,{exams:t})}),(0,i.jsxs)(B.ZP,{item:!0,md:8,xs:12,children:[(0,i.jsx)(e_,{details:n}),(0,i.jsx)(eQ,{details:n})]})]})})})},eU=e=>{var t;let{post:n}=e,l=(0,Q.parseExam)(n),o=(0,S.useRef)(null),s=(0,S.useRef)(null),a=(0,r.useRouter)(),c=(0,S.useRef)(null),d=(0,S.useRef)(null);(0,S.useEffect)(()=>{l||a.push("/")},[]);let[u,x]=(0,S.useState)({action:"",payload:null,loading:!0,online:(null==window?void 0:null===(t=window.navigator)||void 0===t?void 0:t.onLine)||!0}),[h,m]=(0,S.useState)(!0),g=(0,Q.getBrowserPrefix)(),p=(0,Q.getHiddenPropertyName)(g),v=(0,Q.getVisibilityEvent)(g),f=e=>{if("play"==u.action){var t;let n=JSON.parse(localStorage.getItem("action_"+l.id)||"[]");n.push({...e,t:new Date().getTime(),id:null==u?void 0:null===(t=u.payload)||void 0===t?void 0:t.id}),localStorage.setItem("action_"+l.id,JSON.stringify(n))}},j=()=>{let{action:e,payload:t}=u;switch(e){case"requireLogin":case"password":case"requireCollects":var n;(null===(n=c.current)||void 0===n?void 0:n.readyState)===WebSocket.OPEN?c.current.send(JSON.stringify(u)):O().fire({icon:"error",title:"Kiểm tra kết nối Internet",html:"Hiện tại thiết bị của bạn kh\xf4ng c\xf3 kết nối mạng. Vui l\xf2ng kết nối mạng v\xe0 thử lại. H\xe3y lu\xf4n duy tr\xec mạng Internet để l\xe0m b\xe0i thi n\xe0y."})}x(e=>({...e,loading:!0}))},y=()=>{var e,t;(null==u?void 0:u.action)!=="play"&&parseInt(null==l?void 0:null===(e=l.setting)||void 0===e?void 0:e.tabs)&&O().fire({title:"Ch\xfa \xfd",html:"Kh\xf4ng chuyển tab hoặc mở tr\xecnh duyệt, ứng dụng kh\xe1c khi l\xe0m b\xe0i. Nếu sử dụng điện thoại th\xec kh\xf4ng để điện thoại tắt m\xe0n h\xecnh. (Nếu kh\xf4ng, hệ thống sẽ cho l\xe0 bạn gian lận v\xe0 tự động nộp b\xe0i sau ".concat(parseInt(null==l?void 0:null===(t=l.setting)||void 0===t?void 0:t.tabs).toString().padStart(2,"0")," gi\xe2y)."),icon:"warning",confirmButtonText:"Đ\xe3 hiểu"})};(0,S.useEffect)(()=>{let e=()=>{d.current&&clearTimeout(d.current);let e="".concat("wss://cloud.taodethi.xyz","/socket?id=").concat(l.id||"","&userId=").concat(l.userId||"","&resultId=").concat(a.query.id||"","&userToken=").concat(localStorage.getItem("UserToken")||""),n=new WebSocket(e);n.onopen=()=>{if(!a.query.id){let e=JSON.parse(localStorage.getItem("action_"+l.id)||"[]"),t=JSON.parse(localStorage.getItem("logs_"+l.id)||"[]");e.length&&t.length&&n.send(JSON.stringify({action:"offline",payload:{actions:e,logs:t}}))}c.current=n},n.onclose=e=>{1e3===e.code&&m(!1),t()},n.onerror=e=>{t()},n.onmessage=e=>{try{let{action:t,payload:i}=JSON.parse(e.data);if(a.query.id)"result"===t&&x(e=>({...e,action:t,payload:i,loading:!1}));else switch(t){case"offline":localStorage.removeItem("action_"+l.id),localStorage.removeItem("logs_"+l.id);break;case"updateToken":i.UserToken&&localStorage.setItem("UserToken",i.UserToken);break;case"submited":a.push("".concat(window.location.pathname,"?id=").concat(i.resultId)),n.onclose=()=>{};case"password":case"requireLogin":case"comming":case"timeout":case"toLimit":case"play":x(e=>({...e,action:t,payload:i,loading:!1}));break;case"requireCollects":x(e=>({...e,action:t,payload:i.map(e=>({...e,value:""})),loading:!1}));break;case"error":x(e=>({...e,loading:!1})),O().fire({icon:"error",title:i.title,text:i.text,confirmButtonText:"Đ\xe3 hiểu"});break;case"manystabs":let r;O().fire({...i,didOpen:()=>{O().showLoading();let e=O().getPopup().querySelector("b");r=setInterval(()=>{e.textContent="".concat(O().getTimerLeft())},1e3)},willClose:()=>{clearInterval(r),window.location.href=i.link}}).then(e=>{window.location.href=i.link})}a.query.id}catch(e){console.log("Lỗi ws ",e.message)}}},t=()=>{h&&(d.current=setTimeout(()=>{e()},3e3))};return a.isReady&&l&&(a.query.id||y(),e()),()=>{m(!1),c.current&&c.current.close(),d.current&&clearTimeout(d.current)}},[a]);let Z=(0,S.useRef)(!1);(0,S.useEffect)(()=>{let e=()=>{document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement?Z.current=!0:Z.current=!1};return document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("MSFullscreenChange",e),()=>{document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),document.removeEventListener("MSFullscreenChange",e),Z.current=!1}},[]);let b=(0,S.useRef)(null),w=(0,S.useRef)(null),k=(0,S.useRef)(null),C=(0,S.useRef)(null),E=(0,S.useRef)(null);(0,S.useEffect)(()=>{let e=e=>{if(u.loading)return e.preventDefault();if(123===e.keyCode||e.ctrlKey&&e.shiftKey&&73===e.keyCode||e.ctrlKey&&e.shiftKey&&74===e.keyCode||e.ctrlKey&&85===e.keyCode){var t;(null===(t=c.current)||void 0===t?void 0:t.readyState)===WebSocket.OPEN?c.current.send(JSON.stringify({action:"shortcut",payload:e.keyCode})):f({action:"shortcut",payload:e.keyCode}),e.preventDefault()}(116===e.keyCode||122===e.keyCode||27===e.keyCode||e.ctrlKey&&67===e.keyCode)&&e.preventDefault()},t=e=>{var t;u.loading||((null===(t=c.current)||void 0===t?void 0:t.readyState)===WebSocket.OPEN?c.current.send(JSON.stringify({action:"left"})):f({action:"left"}))},n=e=>{var t;if(u.loading)return e.preventDefault();(null===(t=c.current)||void 0===t?void 0:t.readyState)===WebSocket.OPEN&&"play"===u.action?c.current.send(JSON.stringify({action:"right"})):f({action:"right"}),e.preventDefault()},i=()=>{};return b.current&&document.removeEventListener("keydown",b.current),k.current&&document.removeEventListener("contextmenu",k.current),C.current&&window.removeEventListener("resize",C.current),document.addEventListener("keydown",e),document.addEventListener("contextmenu",n),b.current=e,k.current=n,w.current&&document.removeEventListener("click",w.current),"play"===u.action&&(document.addEventListener("click",t),w.current=t,window.addEventListener("resize",i),C.current=i),()=>{b.current&&(document.removeEventListener("keydown",b.current),b.current=null),w.current&&(document.removeEventListener("click",w.current),w.current=null),k.current&&(document.removeEventListener("contextmenu",k.current),k.current=null),C.current&&(window.removeEventListener("resize",C.current),C.current=null),E.current&&clearTimeout(E.current)}},[u]);let T=(0,S.useRef)(!0),L=(0,S.useRef)(null),P=(0,S.useRef)(null),W=(0,S.useRef)(null);return((0,S.useEffect)(()=>{let e=()=>{if(!T.current&&(T.current=!0,!u.loading&&"play"==u.action)){var e;(null===(e=c.current)||void 0===e?void 0:e.readyState)===WebSocket.OPEN?c.current.send(JSON.stringify({action:"visible"})):f({action:"visible"})}},t=()=>{if(T.current&&(T.current=!1,!u.loading&&"play"==u.action)){var e,t,n,i,r;if((null===(e=c.current)||void 0===e?void 0:e.readyState)===WebSocket.OPEN?c.current.send(JSON.stringify({action:"hidden"})):f({action:"hidden"}),parseInt(null==u?void 0:null===(t=u.payload)||void 0===t?void 0:null===(n=t.settings)||void 0===n?void 0:n.tabs)){let e;O().fire({title:"Bạn đang kh\xf4ng tập trung l\xe0m b\xe0i thi",html:'<div style="color:red">Hệ thống sẽ NỘP B\xc0I THI sau <b></b> gi\xe2y.</div>',timer:(null==u?void 0:null===(i=u.payload)||void 0===i?void 0:null===(r=i.settings)||void 0===r?void 0:r.tabs)*1e3,icon:"warning",confirmButtonText:"Đ\xe3 hiểu",timerProgressBar:!0,didOpen:()=>{let t=O().getPopup().querySelector("b");t.textContent="".concat(Math.floor(O().getTimerLeft()/1e3)+1),e=setInterval(()=>{t.textContent="".concat(Math.floor(O().getTimerLeft()/1e3)+1)},1e3)},willClose:()=>{clearInterval(e)}}).then(e=>{if(e.dismiss===O().DismissReason.timer){var t;(null===(t=c.current)||void 0===t?void 0:t.readyState)===WebSocket.OPEN&&(c.current.send(JSON.stringify({action:"submit",payload:{s:"tabs"}})),x(e=>({...e,loading:!0})))}})}}},n=n=>"boolean"==typeof n?n?e():t():document[p]?t():e(),i=()=>L.current(!0),r=()=>L.current(!1);return L.current&&document.removeEventListener(v,L.current),P.current&&(document.removeEventListener("focus",()=>P.current),window.removeEventListener("focus",()=>P.current)),W.current&&(document.removeEventListener("blur",()=>W.current),window.removeEventListener("blur",()=>W.current)),"play"===u.action&&(document.addEventListener(v,n),window.addEventListener("focus",i),document.addEventListener("focus",i),document.addEventListener("blur",r),window.addEventListener("blur",r),L.current=n,P.current=i,W.current=r),()=>{L.current&&(document.removeEventListener(v,L.current),L.current=null),P.current&&(document.removeEventListener("focus",P.current),window.removeEventListener("focus",P.current),P.current=null),W.current&&(document.removeEventListener("blur",W.current),window.removeEventListener("blur",W.current),W.current=null)}},[u]),(0,S.useEffect)(()=>{let e=()=>{x(e=>({...e,online:!0})),O().fire({position:"bottom-start",icon:"success",title:"Mạng Internet đ\xe3 được kh\xf4i phục",html:"",showConfirmButton:!1,timer:3e3})},t=()=>{x(e=>({...e,online:!1})),O().fire({position:"bottom-start",icon:"error",title:"Mất kết nối mạng Internet",html:"",showConfirmButton:!1,timer:3e3})};return o.current&&window.removeEventListener("online",o.current),s.current&&window.removeEventListener("offline",s.current),window.addEventListener("online",e),window.addEventListener("offline",t),o.current=e,s.current=t,()=>{o.current&&(window.removeEventListener("online",o.current),o.current=null),s.current&&(window.removeEventListener("offline",s.current),s.current=null)}},[]),l)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(J(),{children:(0,i.jsx)("title",{children:null==n?void 0:n.title})}),"play"===u.action?(0,i.jsx)(eP,{details:u,setDetails:x,socket:c.current,exams:l}):"result"===u.action?(0,i.jsx)(eK,{details:u,setDetails:x,exams:l,handleClick:j}):(0,i.jsx)(I.Z,{className:"content-center",children:(0,i.jsx)(eF,{details:u,setDetails:x,exams:l,handleClick:j})})]}):(0,i.jsx)("div",{children:"Đ\xe3 đ\xe3 xo\xe1"})};var eX=S.memo(eU),eV=n(5591);let e$=()=>{var e;let t=(0,r.useRouter)(),[n,o]=(0,S.useState)(""),s=(0,Q.getPostLocal)();(0,S.useEffect)(()=>{var e;return o((0,Q.createUrlFeedPost)({id:s.id||(null==window?void 0:null===(e=window.BLOGGER)||void 0===e?void 0:e.postId)||"1901285606483306708"})),()=>{}},[]),s.id&&(0,eV.JG)(n,s);let{data:a,isLoading:c}=(0,l.Z)(t.isReady&&n?n:null,Q.getPostDetail);return!t.isReady||c?(0,i.jsx)(G,{post:null}):(null==a?void 0:null===(e=a.category)||void 0===e?void 0:e.includes("ĐỀ THI"))?(0,i.jsx)(eX,{post:a}):(0,i.jsx)(G,{post:a})};e$.getLayout=e=>(0,i.jsx)(K.Z,{children:e});var e0=e$}},function(e){e.O(0,[265,721,876,896,774,888,179],function(){return e(e.s=3356)}),_N_E=e.O()}]);