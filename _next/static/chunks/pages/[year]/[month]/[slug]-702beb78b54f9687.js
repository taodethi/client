(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[812],{3356:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[year]/[month]/[slug]",function(){return n(5745)}])},8928:function(e,t,n){"use strict";var r=n(5893),i=n(948),l=n(7357);let o=(0,i.ZP)(l.Z)(e=>{let{theme:t}=e;return{height:"100vh","& .content-center":{display:"flex",minHeight:"100vh",alignItems:"center",justifyContent:"center",padding:t.spacing(5)},"& .content-right":{display:"flex",minHeight:"100vh",overflowX:"hidden",position:"relative"}}}),s=e=>{let{children:t}=e;return(0,r.jsx)(o,{className:"layout-wrapper",children:(0,r.jsx)(l.Z,{className:"app-content",sx:{overflow:"hidden",minHeight:"100vh",position:"relative"},children:t})})};t.Z=s},5745:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return e$}});var r=n(5893),i=n(1572),l=n(3972),o=n(6867),s=n(8492),a=n(8041),c=n(1664),d=n.n(c),u=n(2054),x=e=>{let{post:t}=e;return(0,r.jsxs)(a.Z,{"aria-label":"breadcrumb",children:[t?(0,r.jsx)(d(),{underline:"hover",color:"success",href:"/",passHref:!0,children:"Trang chủ"}):(0,r.jsx)(u.Z,{variant:"text",sx:{fontSize:"1rem"},width:100,animation:"wave"}),t?(t.category||[]).map((e,t)=>(0,r.jsx)(d(),{underline:"hover",color:"inherit",href:"/search/label/"+e,passHref:!0,children:e},t)):(0,r.jsx)(u.Z,{variant:"text",sx:{fontSize:"1rem"},width:150,animation:"wave"})]})},h=n(6532),m=n(1250),g=n(3083),p=n(8843),f=n(9334),v=n(8619),j=n(9861),y=n(8756),b=n(9878),Z=n(7294);let w=e=>{let{post:t}=e,[n,i]=(0,Z.useState)([]),{settings:o}=(0,y.r)();(0,Z.useEffect)(()=>{if(t&&t.content){let e=new DOMParser,n=e.parseFromString(t.content,"text/html"),r=n.querySelectorAll("h1, h2, h3, h4, h5, h6"),l=Array.from(r).map(e=>({text:e.textContent,level:parseInt(e.tagName.charAt(1)),id:e.id}));i(l)}},[t]);let s=(e,t)=>{e.preventDefault();let n=document.querySelector("#post-content"),r=n.querySelectorAll("h1, h2, h3, h4, h5, h6");if(r.length>t){let e=r[t],n=e.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:n-75,behavior:"smooth"})}};return n.length?(0,r.jsx)("div",{children:(0,r.jsxs)(h.Z,{defaultExpanded:!0,sx:{backgroundColor:"dark"==o.mode?"#1c1e2154":"#fef6ec"},children:[(0,r.jsx)(m.Z,{expandIcon:(0,r.jsx)(b.Z,{fontSize:"1.25rem",icon:"tabler:chevron-down"}),children:(0,r.jsx)(l.Z,{variant:"h4",sx:{fontWeight:"700!important"},children:"Mục lục"})}),(0,r.jsx)(g.Z,{children:(0,r.jsx)(p.Z,{component:"ul",children:n.map((e,t)=>(0,r.jsx)(j.ZP,{disablePadding:!0,onClick:e=>s(e,t),children:(0,r.jsx)(v.Z,{children:(0,r.jsx)(f.Z,{primary:e.text})})},t))})})]})}):null};var S=n(1649),k=n(7225),C=n(7357),I=n(4799),T=n(1800),E=e=>{let{post:t,changeFont:n}=e,i=(0,S.I0)(),o=e=>{e.stopPropagation(),e.preventDefault(),i((0,k.z)(t))};return t?(0,r.jsxs)(C.Z,{sx:{display:"flex",alignItems:"center",flexWrap:"wrap",mb:5},children:[(0,r.jsxs)(C.Z,{sx:{mr:2,display:"flex",alignItems:"center",color:"primary.main"},children:[(0,r.jsx)(b.Z,{icon:"tabler:discount-check-filled"}),(0,r.jsxs)(C.Z,{sx:{display:{xs:"none",sm:"flex"},alignItems:"center"},children:[(0,r.jsx)(l.Z,{variant:"body2",sx:{mx:2,color:"primary.main"},children:(window.BLOGGER||{}).author||t.author}),(0,r.jsx)(b.Z,{icon:"tabler:point-filled",fontSize:10})]}),(0,r.jsx)(l.Z,{sx:{mx:2,color:"primary.main"},children:(0,T.default)(t.updated).locale("vi").format("HH:mm DD/MM/YYYY")})]}),(0,r.jsxs)(C.Z,{sx:{display:"flex",alignItems:"center",marginLeft:"auto"},children:[(0,r.jsx)(I.Z,{size:"small",onClick:()=>n(-2),sx:{color:"primary.main"},children:(0,r.jsx)(b.Z,{icon:"tabler:text-decrease",fontSize:16})}),(0,r.jsx)(I.Z,{size:"small",onClick:()=>n(2),sx:{color:"primary.main"},children:(0,r.jsx)(b.Z,{icon:"tabler:text-increase",fontSize:22})}),(0,r.jsx)(I.Z,{onClick:o,size:"small",sx:{color:"primary.main"},children:(0,r.jsx)(b.Z,{icon:"tabler:share",fontSize:20})})]})]}):(0,r.jsxs)(C.Z,{sx:{display:"flex",alignItems:"center",flexWrap:"wrap",mb:5,justifyContent:"space-between"},children:[(0,r.jsx)(u.Z,{width:200}),(0,r.jsxs)(C.Z,{sx:{display:"flex"},children:[(0,r.jsx)(u.Z,{variant:"circular",width:30,height:30}),(0,r.jsx)(u.Z,{variant:"circular",width:30,height:30,sx:{mx:1}}),(0,r.jsx)(u.Z,{variant:"circular",width:30,height:30})]})]})};let L=e=>{let{post:t}=e,[n,i]=(0,Z.useState)(18),a=e=>{i(t=>t+e>=14&&t+e<=26?t+e:t)};return(0,r.jsxs)("div",{style:{mb:3},children:[(0,r.jsx)(s.Z,{children:(0,r.jsx)(x,{post:t})}),(0,r.jsx)(o.Z,{title:t?(0,r.jsx)(l.Z,{variant:"h1",sx:{lineHeight:"1.25",fontSize:"1.75rem",fontWeight:700,textAlign:"justify"},className:"post-title",children:t.title}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.Z,{animation:"wave"}),(0,r.jsx)(u.Z,{animation:"wave"})]})}),(0,r.jsxs)(s.Z,{className:"content-post",children:[(0,r.jsx)(E,{post:t,changeFont:a}),t?(0,r.jsx)(w,{post:t}):(0,r.jsx)(u.Z,{animation:"wave",height:50,variant:"rounded",sx:{mb:2}}),t?(0,r.jsx)(l.Z,{variant:"subtitle1",id:"post-content",sx:{mb:3.25,fontSize:n+"px",lineHeight:"1.75rem",textAlign:"justify"},dangerouslySetInnerHTML:{__html:t.content}}):(0,r.jsx)(u.Z,{animation:"wave",height:500,variant:"rectangular"})]})]})};var P=n(9397),W=n(4486),N=n(3931),z=n(7720),M=n(8885),H=n(2563),O=n(6485),A=n.n(O),Y=n(6455),_=n.n(Y);let R=e=>{let{post:t}=e,[n,i]=(0,Z.useState)(null),o=e=>{i(e.currentTarget)},s=()=>{i(null)},a=()=>{let e=document.getElementById("post-comment");e&&e.scrollIntoView({behavior:"smooth"}),s()},c=e=>window.location.origin+e,u=()=>{A()(c((null==t?void 0:t.url)||"")),s(),_().fire({icon:"success",text:"Đ\xe3 sao ch\xe9p th\xe0nh c\xf4ng",timer:1500})},[x,h]=(0,Z.useState)(!1);if((0,Z.useEffect)(()=>{let e=()=>{let e=document.getElementById("post-content");if(e){let t=e.getBoundingClientRect(),n=window.innerHeight;h(t.top<n&&t.bottom>0&&window.scrollY>20)}};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[]),!t||!x)return null;let m=t.category[t.category.length-1]||"";return(0,r.jsxs)(C.Z,{sx:{display:{md:"flex",xs:"none"},alignItems:"center",justifyContent:"space-between",position:"fixed",top:0,left:0,zIndex:99,width:"100%",padding:2,backgroundColor:e=>(0,H.E)(e.palette.background.paper,.95),backdropFilter:"blur(6px)"},children:[(0,r.jsx)(P.Z,{startIcon:(0,r.jsx)(b.Z,{icon:"tabler:chevron-left"}),component:d(),href:"/search/label/"+m,disableRipple:!0,children:m}),(0,r.jsxs)(C.Z,{sx:{display:"flex",alignItems:"center",width:"fit-content"},children:[(0,r.jsxs)(C.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,r.jsx)(l.Z,{variant:"body",noWrap:!0,textAlign:"center",children:(0,T.default)(t.updated).format("HH:MM")}),(0,r.jsx)(l.Z,{variant:"body",noWrap:!0,textAlign:"center",sx:{fontWeight:600},children:(0,T.default)(t.updated).format("DD [th\xe1ng] MM")})]}),(0,r.jsx)(z.Z,{orientation:"vertical",flexItem:!0,sx:{mx:2}}),(0,r.jsx)(l.Z,{variant:"h5",sx:{fontWeight:600},children:t.title})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(I.Z,{onClick:o,children:(0,r.jsx)(b.Z,{icon:"tabler:dots"})}),(0,r.jsxs)(W.Z,{keepMounted:!0,id:"simple-menu",anchorEl:n,onClose:s,open:!!n,children:[(0,r.jsxs)(N.Z,{children:[(0,r.jsx)(M.Z,{children:(0,r.jsx)(b.Z,{icon:"tabler:share-3",fontSize:15})}),(0,r.jsx)(f.Z,{primary:"Gửi cho bạn b\xe8"})]}),(0,r.jsxs)(N.Z,{children:[(0,r.jsx)(M.Z,{children:(0,r.jsx)(b.Z,{icon:"tabler:user-edit",fontSize:15})}),(0,r.jsx)(f.Z,{primary:"Đăng l\xean nhật k\xfd"})]}),(0,r.jsxs)(N.Z,{onClick:u,children:[(0,r.jsx)(M.Z,{children:(0,r.jsx)(b.Z,{icon:"tabler:link",fontSize:15})}),(0,r.jsx)(f.Z,{primary:"Sao ch\xe9p li\xean kết"})]}),(0,r.jsxs)(N.Z,{onClick:a,children:[(0,r.jsx)(M.Z,{children:(0,r.jsx)(b.Z,{icon:"tabler:message-circle",fontSize:15})}),(0,r.jsx)(f.Z,{primary:"Đăng nhận x\xe9t"})]}),(0,r.jsxs)(N.Z,{component:d(),href:"/",children:[(0,r.jsx)(M.Z,{children:(0,r.jsx)(b.Z,{icon:"tabler:home",fontSize:15})}),(0,r.jsx)(f.Z,{primary:"Về trang chủ"})]})]})]})]})};var q=n(8263),B=n(9008),F=n.n(B),D=n(8434);let U=e=>{let{post:t}=e;return(0,r.jsxs)(i.Z,{children:[(0,r.jsx)(F(),{children:(0,r.jsx)("title",{children:null==t?void 0:t.title})}),(0,r.jsx)(R,{post:t}),(0,r.jsxs)(q.ZP,{container:!0,spacing:5,children:[(0,r.jsx)(q.ZP,{item:!0,xs:12,md:8,children:(0,r.jsx)(L,{post:t})}),(0,r.jsx)(q.ZP,{item:!0,xs:12,md:4,children:(0,r.jsx)(D.Z,{})})]})]})};var J=n(43),G=n(8928),Q=n(1163),K=n(1987),V=n(7965),X=n(9487);let $=e=>{let{customs:t,setIndex:n,submitQuiz:i}=e;return(0,r.jsx)(K.Z,{sx:{position:"fixed",bottom:0,left:0,right:0},children:(0,r.jsxs)(V.Z,{showLabels:!0,children:["Q"==t.mode?(0,r.jsx)(X.Z,{label:"C\xe2u trước",icon:(0,r.jsx)(b.Z,{icon:"tabler:chevron-left",fontSize:20}),sx:{maxWidth:"unset",color:"green"},disabled:t.currentIndex<1,onClick:n(Math.max(t.currentIndex-1,0))}):null,(0,r.jsx)(X.Z,{label:"Nộp b\xe0i",icon:(0,r.jsx)(b.Z,{icon:"tabler:user-pause",fontSize:20}),sx:{maxWidth:"unset",color:"red"},onClick:i(!1)}),"Q"==t.mode?(0,r.jsx)(X.Z,{label:"C\xe2u sau",icon:(0,r.jsx)(b.Z,{icon:"tabler:chevron-right",fontSize:20}),sx:{maxWidth:"unset",color:"green"},onClick:n(Math.min(t.currentIndex+1,t.maxQuestions-1)),disabled:t.currentIndex+1>=t.maxQuestions}):null]})})};var ee=n(2623);let et=e=>{let{details:t,moveToQuestion:n}=e;return(0,r.jsxs)(ee.Z,{sx:{position:"sticky",top:0},children:[(0,r.jsx)(o.Z,{title:(0,r.jsx)(l.Z,{variant:"h5",children:"Danh s\xe1ch c\xe2u hỏi"})}),(0,r.jsx)(s.Z,{children:(0,r.jsx)(C.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:1,flexWrap:"wrap"},children:t.payload.questions.map((e,t)=>(0,r.jsx)(P.Z,{variant:"tonal",user:"TF"==e.type&&(e.answers||[]).filter(e=>e).length||"TF"!=e.type&&(e.answers||[]).filter(e=>e.toString().trim()).length?"choice":"",onClick:n(e.id),sx:{minWidth:"3.75rem"},children:null==e?void 0:e.number},t))})})]})};var en=n(7952),er=n(2734),ei=n(1796);let el=()=>{let e=(0,er.Z)();return{primaryFilled:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main},primaryLight:{color:e.palette.primary.main,backgroundColor:(0,H.E)(e.palette.primary.main,.16)},secondaryFilled:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main},secondaryLight:{color:e.palette.secondary.main,backgroundColor:(0,H.E)(e.palette.secondary.main,.16)},successFilled:{color:e.palette.success.contrastText,backgroundColor:e.palette.success.main},successLight:{color:e.palette.success.main,backgroundColor:(0,H.E)(e.palette.success.main,.16)},errorFilled:{color:e.palette.error.contrastText,backgroundColor:e.palette.error.main},errorLight:{color:e.palette.error.main,backgroundColor:(0,H.E)(e.palette.error.main,.16)},warningFilled:{color:e.palette.warning.contrastText,backgroundColor:e.palette.warning.main},warningLight:{color:e.palette.warning.main,backgroundColor:(0,H.E)(e.palette.warning.main,.16)},infoFilled:{color:e.palette.info.contrastText,backgroundColor:e.palette.info.main},infoLight:{color:e.palette.info.main,backgroundColor:(0,H.E)(e.palette.info.main,.16)}}},eo=(0,Z.forwardRef)((e,t)=>{let{sx:n,src:i,skin:l,color:o}=e,s=(0,er.Z)(),a=el(),c=(e,t)=>"light"===e?{...a["".concat(t,"Light")]}:"light-static"===e?{color:a["".concat(t,"Light")].color,backgroundColor:(0,ei.$n)(s.palette[t].main,.88)}:{...a["".concat(t,"Filled")]},d={primary:c(l,"primary"),secondary:c(l,"secondary"),success:c(l,"success"),error:c(l,"error"),warning:c(l,"warning"),info:c(l,"info")};return(0,r.jsx)(en.Z,{ref:t,...e,sx:!i&&l&&o?Object.assign(d[o],n):n})});eo.defaultProps={skin:"filled",color:"primary"};var es=n(1008);n(8594);var ea=n(2715);let ec=e=>{let[t,n]=(0,Z.useState)(e.value||""),i=(0,Z.useRef)(null),l=t=>{var{value:r}=t.target;n(r),clearTimeout(i.current),i.current=setTimeout(()=>{e.onChange&&e.onChange(r)},500)};return(0,Z.useEffect)(()=>()=>{clearTimeout(i.current)},[]),(0,r.jsx)(ea.Z,{value:t,fullWidth:!0,onChange:l,placeholder:e.placeholder,rows:e.rows,multiline:!!e.rows,autoComplete:"off"})};var ed=n(2872);let eu=e=>{let t=e.match(/^(?:https?:\/\/)?(?:www\.)?youtu\.?be(?:\.com)?\/(?:watch\?v=|embed\/|v\/|youtu\.be\/|youtube\.com\/(?:c\/|v\/|u\/\w+\/|embed\/|watch\?v=|shorts\/))([\w-]{11})(?:[?&].*|$)/);return t?t[1]:null},ex=e=>{let t=Math.floor(e/3600);return"".concat(t?"".concat(String(t).padStart(2,"0"),":"):"").concat(String(Math.floor(e%3600/60)).padStart(2,"0"),":").concat(String(Math.floor(e%60)).padStart(2,"0"))},eh=[{title:"0.5",value:.5},{title:"0.75",value:.75},{title:"B\xecnh thường",value:1},{title:"1.5",value:1.5},{title:"2",value:2}],em=e=>{let{audio:t}=e,[n,i]=(0,Z.useState)(!1),[o,s]=(0,Z.useState)(0),[a,c]=(0,Z.useState)(0),[d,u]=(0,Z.useState)(1),x=(0,Z.useRef)(new Audio(t.src));(0,Z.useEffect)(()=>{let e=x.current,t=()=>{s(e.currentTime),c(e.duration)},n=()=>{i(!1)};return e.addEventListener("timeupdate",t),e.addEventListener("ended",n),()=>{e.removeEventListener("timeupdate",t),e.removeEventListener("ended",n)}},[]);let h=()=>{x.current&&(n?x.current.pause():x.current.play(),i(!n))},m=e=>{if(!x.current)return;let{duration:n}=x.current,r=n*(e.target.value/100);(null==t?void 0:t.next)&&(x.current.currentTime=r)},g=e=>{x.current.playbackRate=e,j(null),u(e)},p=()=>{let e=document.createElement("a");e.href=t.src,e.target="_blank",document.body.appendChild(e),e.click(),document.body.removeChild(e)},[v,j]=(0,Z.useState)(null);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(C.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",background:"white",padding:2,borderRadius:10,boxShadow:"0px 4px 18px 0px rgba(47, 43, 61, 0.1)"},children:[(0,r.jsxs)(C.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mr:3},children:[(0,r.jsx)(I.Z,{onClick:h,children:(0,r.jsx)(b.Z,{icon:"tabler:"+(n?"pause":"player-play")})}),(0,r.jsxs)(l.Z,{variant:"body",children:[ex(o),"/",ex(a)]})]}),(0,r.jsx)(C.Z,{sx:{flexGrow:1,display:"flex",alignItems:"center",mr:2},children:(0,r.jsx)(ed.ZP,{value:o/a*100||0,disabled:!a,onChange:m})}),(0,r.jsxs)(C.Z,{children:[(null==t?void 0:t.speed)?(0,r.jsx)(I.Z,{onClick:e=>{j(e.currentTarget)},children:(0,r.jsx)(b.Z,{icon:"tabler:placeholder"})}):null,(null==t?void 0:t.download)?(0,r.jsx)(I.Z,{onClick:p,children:(0,r.jsx)(b.Z,{icon:"tabler:download"})}):null]})]}),(0,r.jsx)(W.Z,{keepMounted:!0,anchorEl:v,onClose:()=>{j(null)},open:!!v,children:eh.map((e,t)=>(0,r.jsxs)(N.Z,{onClick:()=>g(e.value),children:[e.value==d?(0,r.jsx)(M.Z,{children:(0,r.jsx)(b.Z,{icon:"tabler:check",fontSize:20})}):null,(0,r.jsx)(f.Z,{primary:e.title})]},t))})]})},eg=e=>{var t;let{audio:n}=e,[i,o]=(0,Z.useState)(!1),[s,a]=(0,Z.useState)(0),[c,d]=(0,Z.useState)(0),[u,x]=(0,Z.useState)(1),h=(0,Z.useRef)(null),m=()=>{h.current&&(i?h.current.pause():h.current.play(),o(!i))},g=e=>{if(!h.current)return;let{duration:t}=h.current,r=t*(e.target.value/100);(null==n?void 0:n.next)&&(h.current.currentTime=r)},p=e=>{h.current&&(h.current.playbackRate=e,y(null),x(e))},v=()=>{var e;if(!h.current)return;let t=document.createElement("a");t.href=null==h?void 0:null===(e=h.current)||void 0===e?void 0:e.src,t.target="_blank",document.body.appendChild(t),t.click(),document.body.removeChild(t)},[j,y]=(0,Z.useState)(null);return((0,Z.useEffect)(()=>{if(!h.current)return;let e=h.current,t=()=>{a(e.currentTime),d(e.duration)},n=()=>{o(!1)};return e.addEventListener("timeupdate",t),e.addEventListener("ended",n),()=>{e.removeEventListener("timeupdate",t),e.removeEventListener("ended",n)}},[i]),Array.isArray(null==n?void 0:n.src))?(0,r.jsxs)(C.Z,{children:[(0,r.jsx)("div",{style:{position:"relative",paddingBottom:"56.25%",height:0,overflow:"hidden"},children:(0,r.jsx)("video",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},ref:h,src:null===(t=((null==n?void 0:n.src)||[])[0])||void 0===t?void 0:t.url})}),(0,r.jsxs)(C.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"info.light",padding:1,borderBottomLeftRadius:15,borderBottomRightRadius:15,boxShadow:"0px 4px 18px 0px rgb(6 0 0 / 30%)"},children:[(0,r.jsxs)(C.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsx)(I.Z,{onClick:m,children:(0,r.jsx)(b.Z,{icon:"tabler:"+(i?"pause":"player-play")})}),(0,r.jsxs)(l.Z,{variant:"body",children:[ex(s),"/",ex(c)]})]}),(0,r.jsx)(C.Z,{sx:{flexGrow:1,display:"flex",alignItems:"center",mx:2},children:(0,r.jsx)(ed.ZP,{value:s/c*100||0,disabled:!c,onChange:g})}),(0,r.jsxs)(C.Z,{children:[(null==n?void 0:n.speed)?(0,r.jsx)(I.Z,{onClick:e=>{y(e.currentTarget)},children:(0,r.jsx)(b.Z,{icon:"tabler:placeholder"})}):null,(null==n?void 0:n.download)?(0,r.jsx)(I.Z,{onClick:v,children:(0,r.jsx)(b.Z,{icon:"tabler:download"})}):null]})]}),(0,r.jsx)(W.Z,{keepMounted:!0,anchorEl:j,onClose:()=>{y(null)},open:!!j,children:eh.map((e,t)=>(0,r.jsxs)(N.Z,{onClick:()=>p(e.value),children:[e.value==u?(0,r.jsx)(M.Z,{children:(0,r.jsx)(b.Z,{icon:"tabler:check",fontSize:20})}):null,(0,r.jsx)(f.Z,{primary:e.title})]},t))})]}):(0,r.jsx)("div",{style:{position:"relative",paddingBottom:"56.25%",height:0,overflow:"hidden"},children:(0,r.jsx)("iframe",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},src:"https://www.youtube.com/embed/".concat(eu(null==n?void 0:n.src)),allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",frameBorder:"0",allowFullScreen:!0})})},ep=e=>{let{audios:t}=e;return(0,r.jsx)(s.Z,{sx:{pb:0,my:3},children:t.map((e,t)=>"youtube"==e.type?(0,r.jsx)(eg,{audio:e},t):(0,r.jsx)(em,{audio:e},t))})},ef=()=>{let e=document.querySelectorAll(".ql-formula");e.forEach(e=>{try{let t=e.getAttribute("data-value");t&&(e.innerHTML=es.Z.renderToString(t,{throwOnError:!1}))}catch(e){console.log(e.message)}})},ev=e=>{let{details:t,customs:n,onSelectAnswer:i}=e;return(0,Z.useEffect)(()=>{if(t){let e=e=>{let{link:t,data:n}=e;return new Promise(e=>{fetch(t).then(e=>e.blob()).then(t=>{let r=new Image;r.src=URL.createObjectURL(t),r.onload=function(){var t=document.createElement("canvas"),i=t.getContext("2d");t.width=n.width,t.height=n.height,i.drawImage(r,n.x,n.y,n.width,n.height,0,0,n.width,n.height),t.toBlob(t=>{e(URL.createObjectURL(t))},"image/png")}}).catch(t=>{console.error("Error fetching image:",t),e("")})})},t=async()=>{try{let r=document.querySelectorAll(".quill-image");for(var t=0;t<r.length;t++){var n=r[t];let{link:i,data:l}=JSON.parse(n.getAttribute("data-value")),o=await e({link:i,data:l});n.getAttribute("src")||n.setAttribute("src",o)}}catch(e){console.log("renderImage",e.message)}};t(),ef()}},[t,n.currentIndex,n.mode]),t.payload.groups.map(e=>{var a;return t.payload.questions[n.currentIndex].groupId==e.id&&"Q"==n.mode||"A"==n.mode?(0,r.jsxs)(ee.Z,{sx:{mb:10,background:"unset"},children:[e.content&&t.payload.groups.length>1?(0,r.jsx)(s.Z,{dangerouslySetInnerHTML:{__html:e.content}}):null,(null==e?void 0:null===(a=e.audios)||void 0===a?void 0:a.length)?(0,r.jsx)(ep,{audios:null==e?void 0:e.audios}):null,(0,r.jsx)(s.Z,{sx:{padding:0,":last-of-type":{pb:0}},children:t.payload.questions.filter(t=>t.groupId==e.id).map((e,a)=>{var c;return n.currentIndex==t.payload.questions.findIndex(t=>t.id==e.id)||"A"==n.mode?(0,r.jsxs)(ee.Z,{sx:{mb:5,":last-of-type":{mb:0}},id:e.id,children:[(0,r.jsx)(o.Z,{title:(0,r.jsxs)(l.Z,{variant:"body",sx:{fontWeight:700,fontSize:n.fontSize+2,color:"primary.main"},children:[e.label||"C\xe2u"," ",e.number,"."]}),sx:{paddingY:3}}),(0,r.jsx)(s.Z,{dangerouslySetInnerHTML:{__html:e.content},sx:{" p":{m:0},py:0}}),(null==e?void 0:null===(c=e.audios)||void 0===c?void 0:c.length)?(0,r.jsx)(ep,{audios:null==e?void 0:e.audios}):null,(0,r.jsx)(s.Z,{sx:{px:0,mt:3},children:(0,r.jsxs)(p.Z,{disablePadding:!0,children:[["TN","HK"].includes(e.type)?e.options.map((t,n)=>(0,r.jsx)(j.ZP,{disablePadding:!0,divider:!0,children:(0,r.jsxs)(v.Z,{sx:{paddingX:2,":hover":{backgroundColor:"primary.main",color:"primary.contrastText"},":hover .MuiAvatar-root":{color:"primary.contrastText",backgroundColor:"primary.light"}},user:(e.answers||[]).includes(n)?"choice":"",onClick:i(e.id,n),children:[(0,r.jsx)(M.Z,{children:(0,r.jsx)(eo,{skin:(e.answers||[]).includes(n)?"static":"light",sx:{fontWeight:600},children:String.fromCharCode(65+n)})}),(0,r.jsx)(C.Z,{dangerouslySetInnerHTML:{__html:t.text},sx:{" p":{m:0},flexGrow:1}})]})},n)):null,"TF"==e.type?e.options.map((t,n)=>(0,r.jsx)(j.ZP,{disablePadding:!0,divider:!0,children:(0,r.jsxs)(v.Z,{sx:{gap:1,cursor:"default",paddingX:2},children:[(0,r.jsx)(eo,{skin:"light",sx:{":hover":{backgroundColor:"primary.main",color:"primary.contrastText"},cursor:"pointer"},user:"T"==(e.answers||[])[n]?"choice":"",onClick:i(e.id,"".concat(n,"-T")),children:"Đ"}),(0,r.jsx)(eo,{skin:"light",sx:{":hover":{backgroundColor:"primary.main",color:"primary.contrastText"},cursor:"pointer"},user:"F"==(e.answers||[])[n]?"choice":"",onClick:i(e.id,"".concat(n,"-F")),children:"S"}),(0,r.jsx)(eo,{skin:"light",color:"secondary",sx:{fontWeight:600},children:String.fromCharCode(97+n)}),(0,r.jsx)(C.Z,{dangerouslySetInnerHTML:{__html:t.text},sx:{" p":{m:0},flexGrow:1}})]})},n)):null]})}),"TL"==e.type?(0,r.jsxs)(s.Z,{sx:{px:2},children:[(0,r.jsx)(z.Z,{sx:{fontWeight:600},children:"B\xe0i l\xe0m"}),(0,r.jsx)(ec,{value:(null==e?void 0:e.answers[0])||"",rows:3,multiline:!0,placeholder:"Vui l\xf2ng nhập b\xe0i l\xe0m của bạn v\xe0o đ\xe2y",onChange:t=>i(e.id,t)()})]}):null,"DT"==e.type?(0,r.jsxs)(s.Z,{sx:{px:2},children:[(0,r.jsx)(z.Z,{sx:{fontWeight:600},children:"Đ\xe1p \xe1n của bạn"}),(0,r.jsx)(ec,{value:(null==e?void 0:e.answers[0])||"",onChange:t=>i(e.id,t)(),sx:{marginX:2},placeholder:"Vui l\xf2ng nhập đ\xe1p \xe1n của bạn v\xe0o đ\xe2y"})]}):null]},e.id):null})})]},e.id):null})},{Grid:ej}=n(2237),ey=e=>{let{details:t,customs:n,setDetails:i,setCustoms:l,moveToQuestion:o,onSelectAnswer:s}=e;return(0,r.jsxs)(ej,{container:!0,spacing:3,sx:{marginY:15,paddingX:3,fontSize:n.fontSize},children:[(0,r.jsx)(ej,{item:!0,xs:12,lg:9,children:(0,r.jsx)(ev,{details:t,customs:n,setDetails:i,setCustoms:l,onSelectAnswer:s})}),(0,r.jsx)(ej,{item:!0,xs:12,lg:3,sx:{display:{lg:"block",md:"none",xs:"none"}},children:(0,r.jsx)(et,{details:t,moveToQuestion:o})})]})};var eb=n(9058);let eZ=e=>{let{details:t,customs:n,onClose:i,onSelectAnswer:o}=e;return(0,r.jsxs)(eb.ZP,{anchor:"right",open:n.panel,onClose:i,sx:{".MuiDrawer-paper":{minWidth:"15rem"}},children:[(0,r.jsx)(l.Z,{variant:"h4",sx:{textAlign:"center",p:3},children:"BẢNG Đ\xc1P \xc1N"}),(0,r.jsx)(p.Z,{children:t.payload.questions.map((e,t)=>(0,r.jsx)(j.ZP,{sx:{paddingY:.5},children:(0,r.jsxs)(C.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:1},children:[(0,r.jsx)(eo,{sx:{cursor:"pointer"},onClick:o(e.id,-1,"p"),children:null==e?void 0:e.number}),((null==e?void 0:e.options)||[]).map((t,n)=>(0,r.jsx)(eo,{skin:"light",user:(e.answers||[]).includes(n)||(e.answers||[])[n]&&"TF"==e.type?"choice":"",sx:{cursor:"pointer",":hover":{backgroundColor:"primary.main",color:"primary.contrastText"}},onClick:o(e.id,n,"b"),children:String.fromCharCode(65+n)},n))]})},t))})]})};var ew=n(2067),eS=n(9609);let ek=e=>{var t,n,i,o,s,a;let{details:c,submitQuiz:d}=e,[u,x]=(0,Z.useState)(null);return(0,Z.useEffect)(()=>{var e;let t=c.payload.times.current,n=6e4*((null===(e=c.payload.settings)||void 0===e?void 0:e.timeout)||90)-t+c.payload.times.startAt,r=setInterval(()=>{var e;n-=1e3,x(t+=1e3),document.title=(0,eS.convertMilliseconds)(6e4*((null===(e=c.payload.settings)||void 0===e?void 0:e.timeout)||90)-t+c.payload.times.startAt)+" - ".concat(c.payload.settings.title),n<1e3&&(d(!0)(),clearInterval(r))},1e3);return()=>{r&&clearInterval(r)}},[null==c?void 0:null===(t=c.payload)||void 0===t?void 0:t.times]),(0,r.jsxs)(C.Z,{sx:{position:"fixed",top:0,left:0,maxHeight:"3.25rem",background:"linear-gradient(    to right,    #ff4b2b7a,    #ff416c78  )",width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:1,mX:5,color:"#fff",zIndex:350},children:[(0,r.jsxs)(C.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",ml:3},children:[(0,r.jsx)(l.Z,{variant:"h5",children:null==c?void 0:null===(n=c.payload)||void 0===n?void 0:n.student}),(0,r.jsx)(l.Z,{variant:"body",children:(0,T.default)(u).format("HH:mm DD/MM/YYYY")})]}),(0,r.jsxs)(C.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",mr:3},children:[(0,r.jsx)(ew.Z,{color:c.online?"success":"error",variant:"dot",anchorOrigin:{vertical:"bottom",horizontal:"left"},children:(0,r.jsx)(l.Z,{variant:"h3",sx:{fontWeight:700},children:u&&(0,eS.convertMilliseconds)(6e4*((null===(i=c.payload.settings)||void 0===i?void 0:i.timeout)||90)-u+c.payload.times.startAt)})}),(0,r.jsxs)(l.Z,{variant:"body",children:["Đ\xe3 l\xe0m"," ",null==c?void 0:null===(o=c.payload)||void 0===o?void 0:o.questions.filter(e=>"TF"==e.type&&(e.answers||[]).filter(e=>e).length||"TF"!=e.type&&(e.answers||[]).filter(e=>e.toString().trim()).length).length,"/",null==c?void 0:null===(s=c.payload)||void 0===s?void 0:null===(a=s.questions)||void 0===a?void 0:a.length]})]})]})},eC=e=>{let{handleClick:t,customs:n}=e;return(0,r.jsx)(C.Z,{sx:{position:"fixed",right:"-116px",top:"30%",background:"rgb(0 0 0 / 6%)",boxShadow:"10px 0 30px #888",borderRadius:"10px 0 0 10px",".MuiListItemButton-root":{paddingLeft:3},":hover":{right:0,background:"#fff"}},children:(0,r.jsxs)(p.Z,{children:[(0,r.jsx)(j.ZP,{disablePadding:!0,onClick:t("increase"),children:(0,r.jsxs)(v.Z,{children:[(0,r.jsx)(M.Z,{children:(0,r.jsx)(b.Z,{icon:"tabler:zoom-in",fontSize:20})}),(0,r.jsx)(f.Z,{primary:"Tăng cỡ chữ"})]})}),(0,r.jsx)(j.ZP,{disablePadding:!0,onClick:t("reduce"),children:(0,r.jsxs)(v.Z,{children:[(0,r.jsx)(M.Z,{children:(0,r.jsx)(b.Z,{icon:"tabler:zoom-out",fontSize:20})}),(0,r.jsx)(f.Z,{primary:"Giảm cỡ chữ"})]})}),"Q"!=n.showQuestions?(0,r.jsx)(j.ZP,{disablePadding:!0,onClick:t("viewone"),children:(0,r.jsxs)(v.Z,{children:[(0,r.jsx)(M.Z,{children:(0,r.jsx)(b.Z,{icon:"tabler:list-letters",fontSize:20})}),(0,r.jsx)(f.Z,{primary:"A"==n.mode?"Hiện từng c\xe2u":"Hiện tất cả"})]})}):null,(0,r.jsx)(j.ZP,{disablePadding:!0,onClick:t("answers"),children:(0,r.jsxs)(v.Z,{children:[(0,r.jsx)(M.Z,{children:(0,r.jsx)(b.Z,{icon:"tabler:checkup-list",fontSize:20})}),(0,r.jsx)(f.Z,{primary:"Bảng đ\xe1p \xe1n"})]})})]})})};var eI=n(5889),eT=n(6489);let eE=e=>!!e&&(void 0!==e.movementX&&void 0!==e.movementY?0===e.movementX&&0===e.movementY&&0===e.clientX&&0===e.clientY&&0===e.screenX&&0===e.screenY:"click"!==e.type||"mouse"!==e.pointerType&&"pen"!==e.pointerType&&!1),eL=e=>{let{details:t,setDetails:n,socket:i,exams:l}=e,[o,s]=(0,Z.useState)({fontSize:16,mode:t.payload.settings.showQuestions||"A",currentIndex:0,maxQuestions:t.payload.questions.length,panel:!1,showQuestions:t.payload.settings.showQuestions||"A"}),a=e=>()=>{switch(e){case"answers":s(e=>({...e,panel:!e.panel}));break;case"increase":s(e=>({...e,fontSize:Math.min(e.fontSize+2,30)}));break;case"reduce":s(e=>({...e,fontSize:Math.max(e.fontSize-2,10)}));break;case"viewone":setTimeout(()=>{var e,n,r=document.getElementById(null===(e=null===(n=t.payload)||void 0===n?void 0:n.questions[o.currentIndex])||void 0===e?void 0:e.id);if(r){var i=r.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:i-100,behavior:"smooth"})}},300),s(e=>({...e,mode:"A"==e.mode?"Q":"A"}))}},c=e=>{var n;let r=JSON.parse(localStorage.getItem("logs_"+l.id)||"[]");r.push({...e,t:new Date().getTime(),id:null==t?void 0:null===(n=t.payload)||void 0===n?void 0:n.id}),localStorage.setItem("logs_"+l.id,JSON.stringify(r))},d=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return r=>{if(!t.loading){if(e)i.readyState===WebSocket.OPEN&&(i.send(JSON.stringify({action:"submit",payload:{s:"timeout"}})),n(e=>({...e,loading:!0}))),setTimeout(()=>{var e;window.location.href="".concat(window.location.origin).concat(window.location.pathname,"?id=").concat((null==t?void 0:null===(e=t.payload)||void 0===e?void 0:e.id)||"")},1500);else{var l,o,s,a,c,d=(null==t?void 0:null===(l=t.payload)||void 0===l?void 0:null===(o=l.questions)||void 0===o?void 0:o.length)-(null==t?void 0:null===(s=t.payload)||void 0===s?void 0:s.questions.filter(e=>"TF"==e.type&&(e.answers||[]).filter(e=>e).length||"TF"!=e.type&&(e.answers||[]).filter(e=>e.toString().trim()).length).length);let e=(null==t?void 0:null===(a=t.payload)||void 0===a?void 0:null===(c=a.settings)||void 0===c?void 0:c.require)=="T";if(e&&d){_().fire({title:"Vui l\xf2ng ho\xe0n th\xe0nh tất cả c\xe1c c\xe2u hỏi trước khi nộp b\xe0i.",html:'<div style="font-weight: 600; color : red; padding : 10px 0">Bạn c\xf2n '.concat(d.toString().padStart(2,"0")," c\xe2u hỏi chưa trả lời.</div>"),icon:"error",confirmButtonText:"Đ\xe3 hiểu"});return}var u='<div style="text-align:justify">Khi x\xe1c nhận nhấn nộp b\xe0i, bạn sẽ kh\xf4ng thể sửa lại b\xe0i thi của m\xecnh. H\xe3y chắc chắn bạn đ\xe3 xem lại tất cả c\xe1c đ\xe1p \xe1n. Ch\xfac bạn may mắn!</div>';u=d?'<div style="font-weight: 600; color : red; padding : 10px 0">Bạn c\xf2n '.concat(d.toString().padStart(2,"0")," c\xe2u hỏi chưa trả lời.</div>")+u:u,_().fire({title:"Bạn c\xf3 chắc chắn muốn nộp b\xe0i?",html:u,icon:"warning",showCancelButton:!0,cancelButtonText:"Tiếp tục l\xe0m",confirmButtonText:"Nộp b\xe0i ngay"}).then(e=>{e.isConfirmed&&(i.readyState===WebSocket.OPEN?(i.send(JSON.stringify({action:"submit",payload:{s:"user"}})),n(e=>({...e,loading:!0}))):_().fire({icon:"error",title:"Kiểm tra kết nối Internet",html:"Hiện tại thiết bị của bạn kh\xf4ng c\xf3 kết nối mạng. Vui l\xf2ng kết nối mạng v\xe0 thử lại. H\xe3y lu\xf4n duy tr\xec mạng Internet để l\xe0m b\xe0i thi n\xe0y."}),n(e=>({...e,loading:!0})))})}}}},u=e=>function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n&&s(n=>({...n,currentIndex:t.payload.questions.findIndex(t=>t.id===e)}));var r=document.getElementById(e);if(r){var i=r.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:i-100,behavior:"smooth"})}},x=()=>{s(e=>({...e,panel:!1}))},h=function(e,r){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"u";return o=>{s(n=>({...n,currentIndex:t.payload.questions.findIndex(t=>t.id===e)})),["p","b"].includes(l)&&u(e)(),-1!=parseInt(r)&&n(t=>{let n={...t.payload,questions:t.payload.questions.map(n=>{if(n.id===e){var s=t.payload.groups.findIndex(e=>e.id==n.groupId),a=[],d=[];switch(n.type){case"TN":case"MN":case"DT":case"TL":a=[r],d={v:r};break;case"TF":a=(null==n?void 0:null===(u=n.answers)||void 0===u?void 0:u.length)?null==n?void 0:n.answers:Array(n.options.length).fill("");var u,[x,h]=r.toString().split("-");h&&(a[x]=h,d={v:r,p:x},d={i:x,v:h});break;case"HK":(a=(null==n?void 0:n.answers)||[]).includes(r)?(a=a.filter(e=>e!=r),d={v:r,t:"r"}):(a.push(r),d={v:r,t:"a"})}return i.readyState===WebSocket.OPEN?i.send(JSON.stringify({action:"answers",payload:{answers:a,...d,id:n.id,n:n.number,s:l,g:s,c:eE(o)?"j":"m"}})):c({action:"answers",payload:{answers:a,...d,id:n.id,n:n.number,s:l,g:s,c:eE(o)?"j":"m"}}),{...n,answers:a}}return n})};return{...t,payload:n}}),g()}},m=e=>()=>{s(t=>({...t,currentIndex:e}))},g=()=>{document.documentElement.requestFullscreen?document.documentElement.requestFullscreen().catch(e=>{console.log("Error attempting to enable full-screen mode: ".concat(e.message," (").concat(e.name,")"))}):document.documentElement.webkitRequestFullscreen?document.documentElement.webkitRequestFullscreen().catch(e=>{console.log("Error attempting to enable full-screen mode: ".concat(e.message," (").concat(e.name,")"))}):document.documentElement.msRequestFullscreen&&document.documentElement.msRequestFullscreen().catch(e=>{console.log("Error attempting to enable full-screen mode: ".concat(e.message," (").concat(e.name,")"))})},p=()=>{document.exitFullscreen?document.exitFullscreen().catch(e=>{console.log("Error attempting to exit full-screen mode: ".concat(e.message," (").concat(e.name,")"))}):document.webkitExitFullscreen?document.webkitExitFullscreen().catch(e=>{console.log("Error attempting to exit full-screen mode: ".concat(e.message," (").concat(e.name,")"))}):document.msExitFullscreen&&document.msExitFullscreen().catch(e=>{console.log("Error attempting to exit full-screen mode: ".concat(e.message," (").concat(e.name,")"))})};return(0,Z.useEffect)(()=>(g(),()=>{p()}),[]),(0,r.jsxs)("div",{children:[(0,r.jsx)(ek,{details:t,submitQuiz:d}),(0,r.jsx)(ey,{details:t,customs:o,setDetails:n,setCustoms:s,moveToQuestion:u,onSelectAnswer:h}),(0,r.jsx)(eC,{handleClick:a,customs:o}),(0,r.jsx)(eZ,{details:t,customs:o,onClose:x,onSelectAnswer:h}),(0,r.jsx)($,{customs:o,setIndex:m,submitQuiz:d}),(0,r.jsx)(eI.Z,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:!!t.loading,children:(0,r.jsx)(eT.Z,{color:"inherit"})})]})};var eP=n(9685);let eW=e=>{let{payload:t}=e,[n,i]=(0,Z.useState)(0);return(0,Z.useEffect)(()=>{i(t.startTime-t.currentTime);let e=setInterval(()=>{i(e=>(e<0&&window.location.reload(),e-1e3))},1e3);return()=>{clearInterval(e)}},[]),(0,r.jsxs)(s.Z,{sx:{paddingY:2},children:[(0,r.jsx)(l.Z,{sx:{textAlign:"center",color:"primary.main",marginY:3,fontWeight:600},variant:"h5",children:"ĐỀ THI SẼ BẮT ĐẦU SAU"}),(0,r.jsxs)(l.Z,{variant:"h3",sx:{textAlign:"center",color:"error.main",marginY:3,fontWeight:600},children:[" ",(0,eS.convertMilliseconds)(n)]})]})},eN=e=>{let{payload:t,setDetails:n,handleClick:i}=e;return(0,r.jsxs)(s.Z,{sx:{paddingY:2},children:[(0,r.jsx)(l.Z,{sx:{textAlign:"center",color:"primary.main",marginY:3,fontWeight:600},variant:"h5",children:"VUI L\xd2NG ĐĂNG NHẬP ĐỂ L\xc0M B\xc0I"}),t.map((e,t)=>(0,Z.createElement)(ea.Z,{...e,key:t,fullWidth:!0,sx:{mb:2},onChange:e=>n(n=>({...n,payload:n.payload.map((n,r)=>r===t?{...n,value:e.target.value}:n)}))})),(0,r.jsx)(P.Z,{fullWidth:!0,variant:"contained",endIcon:(0,r.jsx)(b.Z,{icon:"tabler:login-2"}),onClick:i,sx:{marginY:3},children:"Đăng nhập"})]})},ez=e=>{let{payload:t,setDetails:n,handleClick:i}=e;return(0,r.jsxs)(s.Z,{sx:{paddingY:2},children:[(0,r.jsx)(l.Z,{sx:{textAlign:"center",color:"primary.main",marginY:3,fontWeight:600},variant:"h5",children:"VUI L\xd2NG NHẬP MẬT KHẨU ĐỂ L\xc0M B\xc0I THI"}),t.map((e,t)=>(0,Z.createElement)(ea.Z,{...e,key:t,fullWidth:!0,sx:{mb:2},onChange:e=>n(n=>({...n,payload:n.payload.map((n,r)=>r===t?{...n,value:e.target.value}:n)}))})),(0,r.jsx)(P.Z,{fullWidth:!0,variant:"contained",endIcon:(0,r.jsx)(b.Z,{icon:"tabler:login-2"}),onClick:i,sx:{marginY:3},children:"Mở kh\xf3a đề thi"})]})},eM=e=>{let{payload:t,setDetails:n,handleClick:i}=e;return(0,r.jsxs)(s.Z,{sx:{paddingY:2},children:[(0,r.jsx)(l.Z,{sx:{textAlign:"center",color:"primary.main",marginY:3,fontWeight:600},variant:"h5",children:"HO\xc0N TH\xc0NH C\xc1C TH\xd4NG TIN DƯỚI Đ\xc2Y"}),t.map((e,t)=>(0,Z.createElement)(ea.Z,{...e,key:t,fullWidth:!0,sx:{mb:2},onChange:e=>n(n=>({...n,payload:n.payload.map((n,r)=>r===t?{...n,value:e.target.value}:n)})),autoFocus:!t,autoComplete:"off"})),(0,r.jsx)(P.Z,{fullWidth:!0,variant:"contained",endIcon:(0,r.jsx)(b.Z,{icon:"tabler:login-2"}),onClick:i,sx:{marginY:3},children:"Bắt đầu l\xe0m b\xe0i"})]})},eH=e=>{var t,n,i;let{details:o,setDetails:a,exams:c,handleClick:d}=e;return(0,r.jsxs)(ee.Z,{sx:{maxWidth:600,width:"100%"},children:[(0,r.jsx)("img",{src:c.setting.cover,title:c.setting.title,style:{maxHeight:314,width:"100%"},alt:c.setting.title}),(0,r.jsxs)(s.Z,{sx:{paddingY:2},children:[(0,r.jsx)(l.Z,{gutterBottom:!0,variant:"h3",component:"div",sx:{fontWeight:700,fontSize:"1.5rem"},children:c.setting.title}),(0,r.jsx)(l.Z,{variant:"body",color:"text.secondary",dangerouslySetInnerHTML:{__html:c.setting.subtitle},sx:{fontSize:"1rem",textAlign:"justify"}})]}),(0,r.jsx)(s.Z,{sx:{paddingY:2},children:(0,r.jsxs)(p.Z,{children:[(0,r.jsxs)(j.ZP,{sx:{paddingY:1},children:[(0,r.jsx)(M.Z,{children:(0,r.jsx)(b.Z,{icon:"tabler:clock",fontSize:20})}),(0,r.jsx)(f.Z,{primary:"Thời gian l\xe0m b\xe0i"}),(0,r.jsxs)(eP.Z,{sx:{fontWeight:600,color:"success.main"},children:[(null===(t=c.setting)||void 0===t?void 0:t.timeout)||(null===(n=c.setting)||void 0===n?void 0:n.time)," ph\xfat"]})]}),c.setting.numberQuestions?(0,r.jsxs)(j.ZP,{sx:{paddingY:1},children:[(0,r.jsx)(M.Z,{children:(0,r.jsx)(b.Z,{icon:"tabler:help-octagon",fontSize:20})}),(0,r.jsx)(f.Z,{primary:"Số lượng c\xe2u hỏi"}),(0,r.jsxs)(eP.Z,{sx:{fontWeight:600,color:"success.main"},children:[c.setting.numberQuestions," c\xe2u"]})]}):null,(0,r.jsxs)(j.ZP,{sx:{paddingY:1},children:[(0,r.jsx)(M.Z,{children:(0,r.jsx)(b.Z,{icon:"tabler:browser-check",fontSize:20})}),(0,r.jsx)(f.Z,{primary:"Loại đề"}),(0,r.jsx)(eP.Z,{sx:{fontWeight:600,color:"success.main"},children:null!==(i=c.setting.quizType)&&void 0!==i?i:"Trắc nghiệm"})]}),(0,r.jsxs)(j.ZP,{sx:{paddingY:1},children:[(0,r.jsx)(M.Z,{children:(0,r.jsx)(b.Z,{icon:"tabler:users",fontSize:20})}),(0,r.jsx)(f.Z,{primary:"Số lượt l\xe0m đề"}),(0,r.jsx)(eP.Z,{sx:{fontWeight:600,color:"success.main"},children:parseInt(c.setting.retake)?c.setting.retake+" lượt":"Kh\xf4ng giới hạn"})]})]})}),(0,r.jsx)(z.Z,{}),(null==c?void 0:c.id)?null:(0,r.jsx)(s.Z,{sx:{textAlign:"center",backgroundColor:"error.main"},children:(0,r.jsx)(l.Z,{sx:{color:"white",mb:2,fontWeight:600},variant:"h4",children:"ĐỀ THI N\xc0Y CHƯA ĐƯỢC ĐỒNG BỘ. VUI L\xd2NG LI\xcaN HỆ VỚI GI\xc1O VI\xcaN CỦA BẠN."})}),"requireLogin"!=o.action||o.loading?null:(0,r.jsx)(eN,{payload:o.payload,setDetails:a,handleClick:d}),"password"!=o.action||o.loading?null:(0,r.jsx)(ez,{payload:o.payload,setDetails:a,handleClick:d}),"comming"!=o.action||o.loading?null:(0,r.jsx)(eW,{payload:o.payload}),"timeout"!=o.action||o.loading?null:(0,r.jsx)(s.Z,{sx:{paddingY:2},children:(0,r.jsx)(l.Z,{sx:{textAlign:"center",color:"error.main",marginY:3,fontWeight:600},variant:"h5",children:"ĐỀ THI N\xc0Y Đ\xc3 KẾT TH\xdaC"})}),"toLimit"!=o.action||o.loading?null:(0,r.jsx)(s.Z,{sx:{paddingY:2},children:(0,r.jsx)(l.Z,{sx:{textAlign:"center",color:"error.main",marginY:3,fontWeight:600},variant:"h5",children:"BẠN Đ\xc3 HẾT LƯỢT L\xc0M ĐỀ THI N\xc0Y"})}),"requireCollects"!=o.action||o.loading?null:(0,r.jsx)(eM,{payload:o.payload,setDetails:a,handleClick:d}),o.loading&&(null==c?void 0:c.id)?(0,r.jsxs)(s.Z,{sx:{textAlign:"center"},children:[(0,r.jsx)(eT.Z,{}),(0,r.jsx)(l.Z,{sx:{color:"primary.main",mb:2,fontWeight:600},variant:"h5",children:"Vui l\xf2ng đợi..."})]}):null]})},eO=e=>{let{exams:t}=e;return(0,r.jsxs)(ee.Z,{children:[(0,r.jsx)("img",{src:t.setting.cover,title:t.setting.title,style:{maxHeight:314,width:"100%"},alt:t.setting.title}),(0,r.jsxs)(s.Z,{sx:{paddingY:2},children:[(0,r.jsx)(l.Z,{gutterBottom:!0,variant:"h4",component:"div",sx:{fontWeight:700,fontSize:"1.5rem"},children:t.setting.title}),(0,r.jsx)(l.Z,{variant:"body",color:"text.secondary",dangerouslySetInnerHTML:{__html:t.setting.subtitle},sx:{fontSize:"1rem",textAlign:"justify"}})]}),(0,r.jsx)(s.Z,{sx:{paddingY:2}})]})},eA=e=>Math.floor(e/36e5).toString().padStart(2,"0")+":"+Math.floor((e%=36e5)/6e4).toString().padStart(2,"0")+":"+Math.floor((e%=6e4)/1e3).toString().padStart(2,"0"),eY=e=>{var t,n,i,o,a,c,d;let{details:u}=e,x=null==u?void 0:null===(t=u.payload)||void 0===t?void 0:t.Username,{collects:h=[],comments:m={}}=(null==u?void 0:null===(n=u.payload)||void 0===n?void 0:n.details)||{},g=(null==u?void 0:null===(i=u.payload)||void 0===i?void 0:i.overview)||{};return(0,r.jsx)(ee.Z,{children:(null==u?void 0:null===(o=u.payload)||void 0===o?void 0:o.error)?(0,r.jsx)(s.Z,{sx:{minWidth:800,color:"red",fontWeight:600,textAlign:"center",fontSize:"1.5rem"},children:null==u?void 0:null===(a=u.payload)||void 0===a?void 0:a.error}):(0,r.jsxs)(q.ZP,{container:!0,spacing:6,children:[(0,r.jsx)(q.ZP,{item:!0,sm:4,xs:12,sx:{pt:["0 !important","1.5rem !important"],pl:["1.5rem !important","0 !important"]},children:(0,r.jsxs)(s.Z,{sx:{height:"100%",display:"flex",textAlign:"center",alignItems:"center",justifyContent:"center",backgroundColor:"action.hover",flexDirection:"column",p:e=>"".concat(e.spacing(18,5,16)," !important")},children:[(0,r.jsx)(l.Z,{variant:"h6",sx:{lineHeight:1,fontWeight:600,fontSize:"3.75rem !important",color:"error.main"},children:-1==g.point?"...":parseFloat(g.point).toFixed(2)}),(0,r.jsx)("span",{children:"điểm"})]})}),(0,r.jsx)(q.ZP,{item:!0,xs:12,sm:8,children:(0,r.jsxs)(s.Z,{sx:{p:e=>"".concat(e.spacing(3.25,5.75,6.25)," !important")},children:[m[null==u?void 0:null===(c=u.payload)||void 0===c?void 0:c.ResultId]?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{variant:"h5",sx:{mb:3.5,textAlign:"center"},children:"Nhận x\xe9t của gi\xe1o vi\xean"}),(0,r.jsx)(l.Z,{variant:"h5",sx:{color:"error.main",fontStyle:"italic"},children:m[null==u?void 0:null===(d=u.payload)||void 0===d?void 0:d.ResultId]})]}):null,x?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(z.Z,{sx:{mt:2},children:"Th\xf4ng tin th\xed sinh"}),(0,r.jsxs)(p.Z,{children:[(0,r.jsx)(j.ZP,{disablePadding:!0,children:(0,r.jsxs)(M.Z,{sx:{alignItems:"center",color:"primary.main"},children:[(0,r.jsx)(b.Z,{icon:"tabler:user-bolt",fontSize:20}),(0,r.jsxs)(f.Z,{sx:{fontWeight:600,ml:1},disableTypography:!0,children:["Họ v\xe0 t\xean: ",null==x?void 0:x.fullname]})]})}),(0,r.jsx)(j.ZP,{disablePadding:!0,children:(0,r.jsxs)(M.Z,{sx:{alignItems:"center",color:"primary.main"},children:[(0,r.jsx)(b.Z,{icon:"tabler:cash-banknote",fontSize:20}),(0,r.jsxs)(f.Z,{sx:{fontWeight:600,ml:1},disableTypography:!0,children:["Lớp: ",null==x?void 0:x.classes]})]})}),(0,r.jsx)(j.ZP,{disablePadding:!0,children:(0,r.jsxs)(M.Z,{sx:{alignItems:"center",color:"primary.main"},children:[(0,r.jsx)(b.Z,{icon:"tabler:school",fontSize:20}),(0,r.jsxs)(f.Z,{sx:{fontWeight:600,ml:1},disableTypography:!0,children:["Trường: ",null==x?void 0:x.school]})]})})]})]}):null,h.length?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(z.Z,{sx:{mt:2},children:"Th\xf4ng tin thu thập"}),(0,r.jsx)(p.Z,{children:h.map((e,t)=>(0,r.jsx)(j.ZP,{disablePadding:!0,children:(0,r.jsxs)(M.Z,{sx:{alignItems:"center",color:"primary.main"},children:[(0,r.jsx)(b.Z,{icon:"tabler:point",fontSize:20}),(0,r.jsxs)(f.Z,{sx:{fontWeight:600,ml:1},disableTypography:!0,children:[null==e?void 0:e.label,": ",null==e?void 0:e.value]})]})},t))})]}):null,(0,r.jsx)(z.Z,{sx:{mt:2},children:"Tổng quan"}),(0,r.jsxs)(p.Z,{children:[(0,r.jsx)(j.ZP,{disablePadding:!0,children:(0,r.jsxs)(M.Z,{sx:{alignItems:"center",color:"warning.main"},children:[(0,r.jsx)(b.Z,{icon:"tabler:clock",fontSize:20}),(0,r.jsx)(f.Z,{sx:{fontWeight:600,ml:1},disableTypography:!0,children:"Thời gian l\xe0m b\xe0i:"}),(0,r.jsx)(eP.Z,{sx:{fontWeight:600,fontSize:"1.2rem"},children:eA(g.time)})]})}),(0,r.jsx)(j.ZP,{disablePadding:!0,children:(0,r.jsxs)(M.Z,{sx:{alignItems:"center",color:"success.main"},children:[(0,r.jsx)(b.Z,{icon:"tabler:circle-check",fontSize:20}),(0,r.jsx)(f.Z,{sx:{fontWeight:600,ml:1},disableTypography:!0,children:"Số c\xe2u trắc nghiệm đ\xfang"}),(0,r.jsx)(eP.Z,{sx:{fontWeight:600,fontSize:"1.2rem"},children:g.right})]})}),(0,r.jsx)(j.ZP,{disablePadding:!0,children:(0,r.jsxs)(M.Z,{sx:{alignItems:"center",color:"error.main"},children:[(0,r.jsx)(b.Z,{icon:"tabler:circle-x",fontSize:20}),(0,r.jsx)(f.Z,{sx:{fontWeight:600,ml:1},disableTypography:!0,children:"Số c\xe2u trắc nghiệm sai"}),(0,r.jsx)(eP.Z,{sx:{fontWeight:600,fontSize:"1.2rem"},children:g.error})]})}),(0,r.jsx)(j.ZP,{disablePadding:!0,children:(0,r.jsxs)(M.Z,{sx:{alignItems:"center"},children:[(0,r.jsx)(b.Z,{icon:"tabler:sum",fontSize:20}),(0,r.jsx)(f.Z,{sx:{fontWeight:600,ml:1},disableTypography:!0,children:"Tổng số c\xe2u hỏi trong đề"}),(0,r.jsx)(eP.Z,{sx:{fontWeight:600,fontSize:"1.2rem"},children:g.total})]})})]})]})})]})})};var e_=Z.memo(eY),eR=n(6003),eq=n(6010);let eB=e=>{let{sx:t,skin:n,color:i,rounded:l}=e,o=el(),s={primary:{...o.primaryLight},secondary:{...o.secondaryLight},success:{...o.successLight},error:{...o.errorLight},warning:{...o.warningLight},info:{...o.infoLight}},a={...e};return a.rounded=void 0,(0,r.jsx)(eR.Z,{...a,variant:"filled",className:(0,eq.Z)({"MuiChip-rounded":l,"MuiChip-light":"light"===n}),sx:"light"===n&&i?Object.assign(s[i],t):t})},eF=()=>{let e=document.querySelectorAll(".ql-formula");e.forEach(e=>{try{let t=e.getAttribute("data-value");t&&(e.innerHTML=es.Z.renderToString(t,{throwOnError:!1}))}catch(e){console.log(e.message)}})},eD=e=>{var t,n,i,a,c;let{details:d}=e;return(0,Z.useEffect)(()=>{var e,t;if(null==d?void 0:null===(e=d.payload)||void 0===e?void 0:null===(t=e.details)||void 0===t?void 0:t.questions){let e=e=>{let{link:t,data:n}=e;return new Promise(e=>{fetch(t).then(e=>e.blob()).then(t=>{let r=new Image;r.src=URL.createObjectURL(t),r.onload=function(){var t=document.createElement("canvas"),i=t.getContext("2d");t.width=n.width,t.height=n.height,i.drawImage(r,n.x,n.y,n.width,n.height,0,0,n.width,n.height),t.toBlob(t=>{e(URL.createObjectURL(t))},"image/png")}}).catch(t=>{console.error("Error fetching image:",t),e("")})})},t=async()=>{try{let r=document.querySelectorAll(".quill-image");for(var t=0;t<r.length;t++){var n=r[t];let{link:i,data:l}=JSON.parse(n.getAttribute("data-value")),o=await e({link:i,data:l});n.setAttribute("src",o)}}catch(e){console.log("renderImage",e.message)}};t(),eF()}},[null==d?void 0:null===(t=d.payload)||void 0===t?void 0:null===(n=t.details)||void 0===n?void 0:n.questions]),null==d?void 0:null===(i=d.payload)||void 0===i?void 0:null===(a=i.details)||void 0===a?void 0:null===(c=a.groups)||void 0===c?void 0:c.map(e=>{var t,n,i,a;return(0,r.jsxs)(ee.Z,{sx:{mt:10,background:"unset"},children:[e.content&&(null==d?void 0:null===(t=d.payload)||void 0===t?void 0:null===(n=t.details)||void 0===n?void 0:n.groups.length)>1?(0,r.jsx)(s.Z,{dangerouslySetInnerHTML:{__html:e.content}}):null,(0,r.jsx)(s.Z,{sx:{padding:0,":last-of-type":{pb:0}},children:null==d?void 0:null===(i=d.payload)||void 0===i?void 0:null===(a=i.details)||void 0===a?void 0:a.questions.filter(t=>t.groupId==e.id).map((e,t)=>(0,r.jsxs)(ee.Z,{sx:{mb:5,":last-of-type":{mb:0}},id:e.id,children:[(0,r.jsx)(o.Z,{title:(0,r.jsxs)(l.Z,{variant:"body",sx:{fontWeight:700,color:"primary.main",fontSize:"1.3rem"},children:[e.label||"C\xe2u"," ",e.number,"."]}),action:(0,r.jsx)(l.Z,{variant:"body",sx:{fontWeight:700,color:"success.main"},children:-1==e.point?"":parseFloat(e.point).toFixed(2)+" điểm"}),sx:{paddingY:3}}),(0,r.jsx)(s.Z,{dangerouslySetInnerHTML:{__html:e.content},sx:{" p":{m:0},py:0}}),(0,r.jsx)(s.Z,{sx:{px:1,mt:3},children:(0,r.jsxs)(p.Z,{disablePadding:!0,children:[["TN","HK"].includes(e.type)?e.options.map((e,t)=>(0,r.jsxs)(j.ZP,{sx:{borderRadius:1,mb:1,border:"1px solid #b2b2b299"},user:e.user||"",children:[(0,r.jsx)(M.Z,{children:(0,r.jsx)(eo,{skin:(null==e?void 0:e.user)?"static":"light",sx:{fontWeight:600},children:String.fromCharCode(65+t)})}),(0,r.jsx)(C.Z,{dangerouslySetInnerHTML:{__html:e.text},sx:{" p":{m:0},flexGrow:1}})]},t)):null,"TF"==e.type?e.options.map((e,t)=>(0,r.jsxs)(j.ZP,{divider:!0,sx:{gap:1,cursor:"default",paddingX:2},children:[(0,r.jsx)(eo,{skin:"light",user:(null==e?void 0:e.user[0])||"",children:"Đ"}),(0,r.jsx)(eo,{skin:"light",user:(null==e?void 0:e.user[1])||"",children:"S"}),(0,r.jsx)(eo,{skin:"light",color:"secondary",sx:{fontWeight:600},children:String.fromCharCode(97+t)}),(0,r.jsx)(C.Z,{dangerouslySetInnerHTML:{__html:e.text},sx:{" p":{m:0},flexGrow:1}})]},t)):null]})}),"TL"==e.type?(0,r.jsxs)(s.Z,{sx:{px:2},children:[(0,r.jsx)(z.Z,{sx:{fontWeight:600},children:"B\xe0i l\xe0m của bạn"}),(0,r.jsx)(C.Z,{dangerouslySetInnerHTML:{__html:((null==e?void 0:e.answers)||[])[0]||""},sx:{" p":{m:0}}})]}):null,"DT"==e.type?(0,r.jsx)(s.Z,{sx:{px:2},children:(0,r.jsxs)(q.ZP,{container:!0,spacing:3,children:[(0,r.jsxs)(q.ZP,{item:!0,xs:12,md:6,children:[(0,r.jsx)(z.Z,{sx:{fontWeight:600},children:"Đ\xe1p \xe1n của bạn"}),(0,r.jsx)(C.Z,{dangerouslySetInnerHTML:{__html:((null==e?void 0:e.answers)||[])[0]||""},sx:{" p":{m:0}}})]}),(0,r.jsx)(q.ZP,{item:!0,xs:12,md:6,sx:{color:"success.main"},children:e.options.length?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(z.Z,{sx:{fontWeight:600},children:"Đ\xe1p \xe1n đ\xfang"}),e.options.map((e,t)=>(0,r.jsx)(eB,{label:e.text,skin:"light",color:"success",sx:{mr:1,fontWeight:600}},t))]}):null})]})}):null,(null==e?void 0:e.explain)?(0,r.jsxs)(s.Z,{sx:{backgroundColor:"info.light",color:"info.contrastText"},children:[(0,r.jsx)(z.Z,{sx:{fontWeight:600,pt:2},children:"Hướng dẫn giải"}),(0,r.jsx)(C.Z,{dangerouslySetInnerHTML:{__html:e.explain||"Chưa c\xf3 hướng dẫn giải"},sx:{" p":{m:0}}})]}):null]},e.id))})]},e.id)})};var eU=Z.memo(eD);let eJ=e=>{let{exams:t,details:n}=e;return(0,r.jsx)(C.Z,{sx:{display:"flex",justifyContent:"center",marginY:3,paddingX:2},children:(0,r.jsx)(C.Z,{sx:{maxWidth:1200},children:(0,r.jsxs)(q.ZP,{container:!0,spacing:3,children:[(0,r.jsx)(q.ZP,{item:!0,md:4,xs:12,children:(0,r.jsx)(eO,{exams:t})}),(0,r.jsxs)(q.ZP,{item:!0,md:8,xs:12,children:[(0,r.jsx)(e_,{details:n}),(0,r.jsx)(eU,{details:n})]})]})})})},eG=e=>{var t;let{post:n}=e,i=(0,J.parseExam)(n),l=(0,Z.useRef)(null),o=(0,Z.useRef)(null),s=(0,Q.useRouter)(),a=(0,Z.useRef)(null),c=(0,Z.useRef)(null);(0,Z.useEffect)(()=>{i||s.push("/")},[]);let[d,u]=(0,Z.useState)({action:"",payload:null,loading:!0,online:(null==window?void 0:null===(t=window.navigator)||void 0===t?void 0:t.onLine)||!0}),[x,h]=(0,Z.useState)(!0),m=(0,J.getBrowserPrefix)(),g=(0,J.getHiddenPropertyName)(m),p=(0,J.getVisibilityEvent)(m),f=e=>{if("play"==d.action){var t;let n=JSON.parse(localStorage.getItem("action_"+i.id)||"[]");n.push({...e,t:new Date().getTime(),id:null==d?void 0:null===(t=d.payload)||void 0===t?void 0:t.id}),localStorage.setItem("action_"+i.id,JSON.stringify(n))}},v=()=>{let{action:e,payload:t}=d;switch(e){case"requireLogin":case"password":case"requireCollects":var n;(null===(n=a.current)||void 0===n?void 0:n.readyState)===WebSocket.OPEN?a.current.send(JSON.stringify(d)):_().fire({icon:"error",title:"Kiểm tra kết nối Internet",html:"Hiện tại thiết bị của bạn kh\xf4ng c\xf3 kết nối mạng. Vui l\xf2ng kết nối mạng v\xe0 thử lại. H\xe3y lu\xf4n duy tr\xec mạng Internet để l\xe0m b\xe0i thi n\xe0y."})}u(e=>({...e,loading:!0}))},j=()=>{var e,t;(null==d?void 0:d.action)!=="play"&&parseInt(null==i?void 0:null===(e=i.setting)||void 0===e?void 0:e.tabs)&&_().fire({title:"Ch\xfa \xfd",html:"Kh\xf4ng chuyển tab hoặc mở tr\xecnh duyệt, ứng dụng kh\xe1c khi l\xe0m b\xe0i. Nếu sử dụng điện thoại th\xec kh\xf4ng để điện thoại tắt m\xe0n h\xecnh. (Nếu kh\xf4ng, hệ thống sẽ cho l\xe0 bạn gian lận v\xe0 tự động nộp b\xe0i sau ".concat(parseInt(null==i?void 0:null===(t=i.setting)||void 0===t?void 0:t.tabs).toString().padStart(2,"0")," gi\xe2y)."),icon:"warning",confirmButtonText:"Đ\xe3 hiểu"})};(0,Z.useEffect)(()=>{let e=()=>{if(c.current&&clearTimeout(c.current),!(null==i?void 0:i.id)||!(null==i?void 0:i.userId))return!1;let e="".concat("wss://cloud.taodethi.xyz","/socket?id=").concat(i.id||"","&userId=").concat(i.userId||"","&resultId=").concat(s.query.id||"","&userToken=").concat(localStorage.getItem("UserToken")||""),n=new WebSocket(e);n.onopen=()=>{if(!s.query.id){let e=JSON.parse(localStorage.getItem("action_"+i.id)||"[]"),t=JSON.parse(localStorage.getItem("logs_"+i.id)||"[]");e.length&&t.length&&n.send(JSON.stringify({action:"offline",payload:{actions:e,logs:t}}))}a.current=n},n.onclose=e=>{1e3===e.code&&h(!1),t()},n.onerror=e=>{t()},n.onmessage=e=>{try{let{action:r,payload:l}=JSON.parse(e.data);if(s.query.id)"result"===r&&u(e=>({...e,action:r,payload:l,loading:!1}));else switch(r){case"offline":localStorage.removeItem("action_"+i.id),localStorage.removeItem("logs_"+i.id);break;case"updateToken":l.UserToken&&localStorage.setItem("UserToken",l.UserToken);break;case"submited":s.push("".concat(window.location.pathname,"?id=").concat(l.resultId)),n.onclose=()=>{};case"password":case"requireLogin":case"comming":case"timeout":case"toLimit":case"play":u(e=>({...e,action:r,payload:l,loading:!1}));break;case"requireCollects":u(e=>({...e,action:r,payload:l.map(e=>({...e,value:""})),loading:!1}));break;case"error":u(e=>({...e,loading:!1})),_().fire({icon:"error",title:l.title,text:l.text,confirmButtonText:"Đ\xe3 hiểu"});break;case"manystabs":let o;_().fire({...l,didOpen:()=>{_().showLoading();let e=_().getPopup().querySelector("b");o=setInterval(()=>{e.textContent="".concat(_().getTimerLeft())},1e3)},willClose:()=>{clearInterval(o),window.location.href=l.link}}).then(e=>{window.location.href=l.link});break;case"alert":_().fire({position:"top-end",icon:"warning",title:"Quay lại b\xe0i l\xe0m ngay em nh\xe9!",showConfirmButton:!1,timer:5e3});var t=new Audio;t.src="https://cdn.jsdelivr.net/gh/taodethi/app-assets/alert.mp3",t.addEventListener("loadedmetadata",function(){t.play()})}s.query.id}catch(e){console.log("Lỗi ws ",e.message)}}},t=()=>{x&&(c.current=setTimeout(()=>{e()},3e3))};return s.isReady&&i&&(s.query.id||j(),e()),()=>{h(!1),a.current&&a.current.close(),c.current&&clearTimeout(c.current)}},[s]);let y=(0,Z.useRef)(!1);(0,Z.useEffect)(()=>{let e=()=>{document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement?y.current=!0:y.current=!1};return document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("MSFullscreenChange",e),()=>{document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),document.removeEventListener("MSFullscreenChange",e),y.current=!1}},[]);let b=(0,Z.useRef)(null),w=(0,Z.useRef)(null),S=(0,Z.useRef)(null),k=(0,Z.useRef)(null),I=(0,Z.useRef)(null);(0,Z.useEffect)(()=>{let e=e=>{if(d.loading)return e.preventDefault();if(123===e.keyCode||e.ctrlKey&&e.shiftKey&&73===e.keyCode||e.ctrlKey&&e.shiftKey&&74===e.keyCode||e.ctrlKey&&85===e.keyCode){var t;(null===(t=a.current)||void 0===t?void 0:t.readyState)===WebSocket.OPEN?a.current.send(JSON.stringify({action:"shortcut",payload:e.keyCode})):f({action:"shortcut",payload:e.keyCode}),e.preventDefault()}(116===e.keyCode||122===e.keyCode||27===e.keyCode||e.ctrlKey&&67===e.keyCode)&&e.preventDefault()},t=e=>{var t;d.loading||((null===(t=a.current)||void 0===t?void 0:t.readyState)===WebSocket.OPEN?a.current.send(JSON.stringify({action:"left"})):f({action:"left"}))},n=e=>{var t;if(d.loading)return e.preventDefault();(null===(t=a.current)||void 0===t?void 0:t.readyState)===WebSocket.OPEN&&"play"===d.action?a.current.send(JSON.stringify({action:"right"})):f({action:"right"}),e.preventDefault()},r=()=>{};return b.current&&document.removeEventListener("keydown",b.current),S.current&&document.removeEventListener("contextmenu",S.current),k.current&&window.removeEventListener("resize",k.current),document.addEventListener("keydown",e),document.addEventListener("contextmenu",n),b.current=e,S.current=n,w.current&&document.removeEventListener("click",w.current),"play"===d.action&&(document.addEventListener("click",t),w.current=t,window.addEventListener("resize",r),k.current=r),()=>{b.current&&(document.removeEventListener("keydown",b.current),b.current=null),w.current&&(document.removeEventListener("click",w.current),w.current=null),S.current&&(document.removeEventListener("contextmenu",S.current),S.current=null),k.current&&(window.removeEventListener("resize",k.current),k.current=null),I.current&&clearTimeout(I.current)}},[d]);let T=(0,Z.useRef)(!0),E=(0,Z.useRef)(null),L=(0,Z.useRef)(null),P=(0,Z.useRef)(null);return((0,Z.useEffect)(()=>{let e=()=>{if(!T.current&&(T.current=!0,!d.loading&&"play"==d.action)){var e;(null===(e=a.current)||void 0===e?void 0:e.readyState)===WebSocket.OPEN?a.current.send(JSON.stringify({action:"visible"})):f({action:"visible"})}},t=()=>{if(T.current&&(T.current=!1,!d.loading&&"play"==d.action)){var e,t,n,r,i;if((null===(e=a.current)||void 0===e?void 0:e.readyState)===WebSocket.OPEN?a.current.send(JSON.stringify({action:"hidden"})):f({action:"hidden"}),parseInt(null==d?void 0:null===(t=d.payload)||void 0===t?void 0:null===(n=t.settings)||void 0===n?void 0:n.tabs)){let e;_().fire({title:"Bạn đang kh\xf4ng tập trung l\xe0m b\xe0i thi",html:'<div style="color:red">Hệ thống sẽ NỘP B\xc0I THI sau <b></b> gi\xe2y.</div>',timer:(null==d?void 0:null===(r=d.payload)||void 0===r?void 0:null===(i=r.settings)||void 0===i?void 0:i.tabs)*1e3,icon:"warning",confirmButtonText:"Đ\xe3 hiểu",timerProgressBar:!0,didOpen:()=>{let t=_().getPopup().querySelector("b");t.textContent="".concat(Math.floor(_().getTimerLeft()/1e3)+1),e=setInterval(()=>{t.textContent="".concat(Math.floor(_().getTimerLeft()/1e3)+1)},1e3)},willClose:()=>{clearInterval(e)}}).then(e=>{if(e.dismiss===_().DismissReason.timer){var t;(null===(t=a.current)||void 0===t?void 0:t.readyState)===WebSocket.OPEN&&(a.current.send(JSON.stringify({action:"submit",payload:{s:"tabs"}})),u(e=>({...e,loading:!0})))}})}}},n=n=>"boolean"==typeof n?n?e():t():document[g]?t():e(),r=()=>E.current(!0),i=()=>E.current(!1);return E.current&&document.removeEventListener(p,E.current),L.current&&(document.removeEventListener("focus",()=>L.current),window.removeEventListener("focus",()=>L.current)),P.current&&(document.removeEventListener("blur",()=>P.current),window.removeEventListener("blur",()=>P.current)),"play"===d.action&&(document.addEventListener(p,n),window.addEventListener("focus",r),document.addEventListener("focus",r),document.addEventListener("blur",i),window.addEventListener("blur",i),E.current=n,L.current=r,P.current=i),()=>{E.current&&(document.removeEventListener(p,E.current),E.current=null),L.current&&(document.removeEventListener("focus",L.current),window.removeEventListener("focus",L.current),L.current=null),P.current&&(document.removeEventListener("blur",P.current),window.removeEventListener("blur",P.current),P.current=null)}},[d]),(0,Z.useEffect)(()=>{let e=()=>{u(e=>({...e,online:!0})),_().fire({position:"bottom-start",icon:"success",title:"Mạng Internet đ\xe3 được kh\xf4i phục",html:"",showConfirmButton:!1,timer:3e3})},t=()=>{u(e=>({...e,online:!1})),_().fire({position:"bottom-start",icon:"error",title:"Mất kết nối mạng Internet",html:"",showConfirmButton:!1,timer:3e3})};return l.current&&window.removeEventListener("online",l.current),o.current&&window.removeEventListener("offline",o.current),window.addEventListener("online",e),window.addEventListener("offline",t),l.current=e,o.current=t,()=>{l.current&&(window.removeEventListener("online",l.current),l.current=null),o.current&&(window.removeEventListener("offline",o.current),o.current=null)}},[]),i)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(F(),{children:(0,r.jsx)("title",{children:null==n?void 0:n.title})}),"play"===d.action?(0,r.jsx)(eL,{details:d,setDetails:u,socket:a.current,exams:i}):"result"===d.action?(0,r.jsx)(eJ,{details:d,setDetails:u,exams:i,handleClick:v}):(0,r.jsx)(C.Z,{className:"content-center",children:(0,r.jsx)(eH,{details:d,setDetails:u,exams:i,handleClick:v})})]}):(0,r.jsx)("div",{children:"Đ\xe3 đ\xe3 xo\xe1"})};var eQ=Z.memo(eG),eK=n(9770),eV=n(5591);let eX=()=>{var e;let t=(0,Q.useRouter)(),[n,i]=(0,Z.useState)(""),l=(0,J.getPostLocal)();(0,Z.useEffect)(()=>{var e;return i((0,J.createUrlFeedPost)({id:l.id||(null==window?void 0:null===(e=window.BLOGGER)||void 0===e?void 0:e.postId)||"1901285606483306708"})),()=>{}},[]),l.id&&(0,eV.JG)(n,l);let{data:o,isLoading:s}=(0,eK.Z)(t.isReady&&n?n:null,J.getPostDetail);return!t.isReady||s?(0,r.jsx)(U,{post:null}):(null==o?void 0:null===(e=o.category)||void 0===e?void 0:e.includes("ĐỀ THI"))?(0,r.jsx)(eQ,{post:o}):(0,r.jsx)(U,{post:o})};eX.getLayout=e=>(0,r.jsx)(G.Z,{children:e});var e$=eX},43:function(e,t,n){"use strict";var r=n(1876).Buffer;Object.defineProperty(t,"__esModule",{value:!0});let i=n(8754),l=i._(n(1800)),o="https://client.taodethi.xyz",s=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:365,r=new Date;r.setTime(r.getTime()+864e5*n);let i="expires="+r.toUTCString();document.cookie=e+"="+t+"; "+i+"; path=/; SameSite=None; Secure",localStorage.setItem(e,t)},a=e=>{for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var r=t[n].trim();if(0===r.indexOf(e+"="))return r.substring(e.length+1,r.length)}return null},c=()=>{console.log("proccessCookie",a("UserToken")),s("AccessToken",a("AccessToken")||localStorage.getItem("AccessToken")||""),s("UserToken",a("UserToken")||localStorage.getItem("UserToken")||"")},d=e=>{let{year:t,month:n}=e;var r={"by-date":e["by-date"]||"false","max-results":e["max-results"]||e.maxResults||10,"start-index":(e.start||e["start-index"]||0)+1,orderby:e.orderby||"updated",q:e.q||"",label:e.label||"","updated-min":e["updated-min"]||"","updated-max":e["updated-max"]||""};return t&&4==parseInt(t).toString().length&&(r["updated-min"]=(0,l.default)("".concat(t,"-").concat(n||"01")).startOf("month").startOf("day").format("YYYY-MM-DDTHH:mm:ssZ"),r["updated-max"]=(0,l.default)("".concat(t,"-").concat(n||"12")).endOf("month").endOf("day").format("YYYY-MM-DDTHH:mm:ssZ")),r},u=e=>{let t=new URLSearchParams,n=d(e),{label:r}=n;delete n.label,delete n.title,Object.keys(n).forEach(e=>{n[e]&&t.set(e,n[e])}),t.set("alt","json");var i="/feeds/posts/default?".concat(t.toString());return r&&(i="/feeds/posts/default/-/".concat(r.split("+").join("/"),"?").concat(t.toString())),i},x=e=>{let{id:t}=e;return"/feeds/posts/default/".concat(t,"?alt=json")},h=e=>{let t=document.createElement("div");t.innerHTML=e;let n=t.getElementsByClassName("hidden");return n.length?n[0].innerText:""},m=()=>"jsonp_callback_".concat(Math.round(1e5*Math.random())),g=e=>new Promise((t,n)=>{let r=m(),i=document.createElement("script");i.src="".concat(o).concat(e,"&callback=").concat(r),window[r]=e=>{delete window[r],document.body.removeChild(i),t(e)},i.onerror=e=>{delete window[r],document.body.removeChild(i),t(null)},document.body.appendChild(i)}),p=(e,t)=>{if("media$thumbnail"in e)n=e.media$thumbnail.url.replace("s72-c",t?"s450":"s150");else{var n,r=e.content.$t,i=r.indexOf("<img"),l=r.indexOf('src="',i),s=r.indexOf('"',l+5),a=r.substr(l+5,s-l-5);n=-1!=i&&-1!=l&&-1!=s&&""!=a?a:"https://i.imgur.com/vT2qWM7.png"}var c=e.link.find(e=>"alternate"===e.rel),d=c?c.href:null;return{id:e.id.$t.match(/(post|page)-(\d+)/)[2],author:e.author[0].name.$t,category:(e.category||[]).map(e=>e.term),published:e.published.$t,title:e.title.$t,updated:e.updated.$t,content:e.content.$t,subtitle:h(e.content.$t),cover:n,url:d.replace(o,"")}},f=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var n,r;let i=await g(e);if(null==i?void 0:null===(n=i.feed)||void 0===n?void 0:n.entry)return null==i?void 0:null===(r=i.feed)||void 0===r?void 0:r.entry.map(e=>p(e,t));return[]}catch(e){throw e}},v=async e=>{try{let t=await g(e);if(null==t?void 0:t.entry)return p(t.entry);return null}catch(e){throw e}},j=e=>{if(!e||!e.content)return null;var t=e.content.match(/var sheet_id= "(.*?)";/);if(t)return JSON.parse(r.from(t[1],"base64").toString("utf8"));var n=/const CONFIG_ = (\{.*?\});/g;return(t=e.content.match(n))?JSON.parse(n.exec(t[0])[1]):null},y=()=>{let e=JSON.parse(sessionStorage.getItem("posts")||"{}");return e},b=["moz","ms","o","webkit"],Z=e=>e?e+"Hidden":"hidden",w=()=>{for(let e=0;e<b.length;e++)if(Z(b[e]) in document)return b[e];return null},S=e=>{let{year:t,month:n,label:r}=e;return r||(n?"B\xe0i đăng trong Th\xe1ng ".concat(n," năm ").concat(t):"B\xe0i đăng trong năm ".concat(t))};e.exports={createUrlFeed:u,getPostByCategory:f,createUrlFeedPost:x,getPostDetail:v,parseExam:j,getPostLocal:y,proccessCookie:c,setCookie:s,getCookie:a,getHiddenPropertyName:Z,getVisibilityEvent:e=>(e||"")+"visibilitychange",getBrowserPrefix:w,getTitleCategory:S}},1800:function(e,t,n){"use strict";n.r(t);var r=n(7484),i=n.n(r),l=n(9387),o=n.n(l);n(7553),i().extend(o()),t.default=i()},9609:function(e){"use strict";let t=e=>{let t=Math.floor((new Date-new Date(e))/1e3);for(let[e,n]of Object.entries({năm:31536e3,tháng:2592e3,tuần:604800,ngày:86400,giờ:3600,phút:60})){let r=Math.floor(t/n);if(r>=1)return"".concat(r," ").concat(e," trước")}return"Vừa mới"},n=e=>"".concat(Math.floor(e/36e5).toString().padStart(2,"0"),":").concat(Math.floor(e%36e5/6e4).toString().padStart(2,"0"),":").concat(Math.floor(e%6e4/1e3).toString().padStart(2,"0"));e.exports={timeAgo:t,convertMilliseconds:n}},8434:function(e,t,n){"use strict";var r=n(5893),i=n(7357);let l=()=>(0,r.jsx)(i.Z,{});t.Z=l}},function(e){e.O(0,[265,721,876,774,888,179],function(){return e(e.s=3356)}),_N_E=e.O()}]);